{"version":3,"file":"bu.js","sources":["../src/utils.js","../src/base/Event.js","../src/math/Vector.js","../src/math/Bounds.js","../src/base/Styled.js","../src/base/Object2D.js","../src/core/Camera.js","../src/core/Scene.js","../src/core/Renderer.coffee","../src/input/InputManager.coffee","../src/base/Bu.js","../src/anim/AnimationRunner.coffee","../src/anim/DashFlowManager.coffee","../src/math/Color.js","../src/anim/AnimationTask.coffee","../src/anim/Animation.coffee","../src/presets.js","../src/math/Size.js","../src/core/Audio.js","../src/drawable/PointText.coffee","../src/shapes/Point.coffee","../src/shapes/Line.coffee","../src/shapes/Bow.coffee","../src/shapes/Circle.coffee","../src/shapes/Ellipse.coffee","../src/shapes/Fan.coffee","../src/shapes/Triangle.coffee","../src/shapes/Polygon.coffee","../src/shapes/Polyline.coffee","../src/shapes/Rectangle.coffee","../src/shapes/Spline.coffee","../src/drawable/Image.coffee","../src/anim/SpriteSheet.coffee","../src/input/MouseControl.coffee","../src/extra/geometryAlgorithm.coffee","../src/extra/ShapeRandomizer.coffee","../src/config.js","../src/index.js"],"sourcesContent":["// Constants and Utils Functions\n\n// Math\nconst HALF_PI = Math.PI / 2\nconst TWO_PI = Math.PI * 2\n\n// Point is rendered as a small circle on screen. This is the radius of the circle.\nconst POINT_RENDER_SIZE = 2.25\n\n// Point can have a label attached near it. This is the gap distance between them.\nconst POINT_LABEL_OFFSET = 5\n\n// Default smooth factor of spline, range in [0, 1] and 1 is the smoothest\nconst DEFAULT_SPLINE_SMOOTH = 0.25\n\n// How close a point to a line is regarded that the point is **ON** the line.\nconst DEFAULT_NEAR_DIST = 5\n\n// Enumeration of mouse buttons, used to compare with `ev.buttons` of mouse events\nconst MOUSE = {\n  NONE: 0,\n  LEFT: 1,\n  RIGHT: 2,\n  MIDDLE: 4,\n}\n\n// Shortcut to define a property for a class. This is used to solve the problem\n// that CoffeeScript didn't support getters and setters.\n// TODO rewrite in js\n// class Person\n//   @constructor: (age) ->\n//     @_age = age\n\n//   @property 'age',\n//     get: -> @_age\n//     set: (val) ->\n//       @_age = val\n\nFunction.prototype.property = function (prop, desc) {\n  return Object.defineProperty(this.prototype, prop, desc)\n}\n\n// Calculate the mean value of numbers\nfunction average () {\n  let ns = arguments\n  if (typeof ns[0] === 'object') ns = ns[0]\n\n  let sum = 0\n  for (let n of ns) {\n    sum += n\n  }\n  return sum / ns.length\n}\n\n// Calculate the hypotenuse from the cathetuses\nfunction bevel (x, y) {\n  return Math.sqrt(x * x + y * y)\n}\n\n// Limit a number by minimum value and maximum value\nfunction clamp (x, min, max) {\n  if (x < min) {\n    x = min\n  }\n  if (x > max) {\n    x = max\n  }\n  return x\n}\n\n// Generate a random number between two numbers\nfunction rand (from, to) {\n  if (!to) {\n    [from, to] = [0, from]\n  }\n  return Math.random() * (to - from) + from\n}\n\n// Convert an angle from radian to deg\nfunction r2d (r) {\n  return (r * 180 / Math.PI).toFixed(1)\n}\n\n// Convert an angle from deg to radian\nfunction d2r (r) {\n  return r * Math.PI / 180\n}\n\n// Get the current timestamp\nfunction now () {\n  return window.performance.now()\n}\n\n// Combine the given options (last item of arguments) with the default options\nfunction combineOptions (args, defaultOptions) {\n  if (!defaultOptions) defaultOptions = {}\n  let givenOptions = args[args.length - 1]\n  if (isPlainObject(givenOptions)) {\n    for (let i in givenOptions) {\n      if (givenOptions[i] != null) defaultOptions[i] = givenOptions[i]\n    }\n  }\n  return defaultOptions\n}\n\n// Check if an object is an plain object, not instance of class/function\nfunction isPlainObject (o) {\n  return o instanceof Object && o.constructor.name === 'Object'\n}\n\n// Check if an object is a Array\nfunction isArray (o) {\n  return o instanceof Array\n}\n\n// Clone an Object or Array\nfunction clone (target) {\n  if (typeof target !== 'object' || target === null || typeof target === 'function') {\n    return target\n  } else {\n    if (target.clone) {\n      return target.clone()\n    }\n    // FIXME cause stack overflow when its a circular structure\n    let newObj\n    if (isArray(target)) {\n      newObj = []\n    } else if (isPlainObject(target)) {\n      newObj = {} // instance of class\n    } else {\n      newObj = Object.create(target.constructor.prototype)\n    }\n    for (let i in target) {\n      if (!target.hasOwnProperty(i)) continue\n      newObj[i] = clone(target[i])\n    }\n    return newObj\n  }\n}\n\n// Make a copy of this function which has a limited shortest executing interval.\nfunction throttle (fn, limit = 0.5) {\n  let currTime = 0\n  let lastTime = 0\n\n  return function () {\n    currTime = Date.now()\n    if (currTime - lastTime > limit * 1000) {\n      fn.apply(null, arguments)\n      lastTime = currTime\n    }\n  }\n}\n\n// Make a copy of this function whose execution will be continuously put off\n// after every calling of this function.\nfunction debounce (fn, delay = 0.5) {\n  let args = null\n  let timeout = null\n\n  let later = () => {\n    fn.apply(null, args)\n  }\n\n  return function () {\n    args = arguments\n    clearTimeout(timeout)\n    timeout = setTimeout(later, delay * 1000)\n  }\n}\n\n// Use localStorage to persist data\n// TODO rename to store\nfunction data (key, value) {\n  if (value) {\n    window.localStorage['Bu.' + key] = JSON.stringify(value)\n  } else {\n    value = window.localStorage['Bu.' + key]\n    return value ? JSON.parse(value) : null\n  }\n}\n\nexport default {\n  HALF_PI,\n  TWO_PI,\n  POINT_RENDER_SIZE,\n  POINT_LABEL_OFFSET,\n  DEFAULT_SPLINE_SMOOTH,\n  DEFAULT_NEAR_DIST,\n  MOUSE,\n\n  average,\n  bevel,\n  clamp,\n  rand,\n  r2d,\n  d2r,\n  now,\n  combineOptions,\n  isPlainObject,\n  isArray,\n  clone,\n  throttle,\n  debounce,\n  data,\n}\n","// Add event listener feature to custom objects\n\nlet Event = function () {\n  let types = {}\n\n  this.on = (type, listener) => {\n    types[type] = types[type] || []\n    let listeners = types[type]\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener)\n    }\n  }\n\n  this.once = (type, listener) => {\n    listener.once = true\n    this.on(type, listener)\n  }\n\n  this.off = (type, listener) => {\n    let listeners = types[type]\n    if (listener) {\n      if (listeners) {\n        let index = listeners.indexOf(listener)\n        if (index > -1) listeners.splice(index, 1)\n      }\n    } else {\n      if (listeners) listeners.length = 0\n    }\n  }\n\n  this.trigger = (type, ev) => {\n    let listeners = types[type]\n\n    if (listeners) {\n      ev = ev || {}\n      ev.target = this\n      for (let listener of listeners) {\n        listener.call(this, ev)\n        if (listener.once) {\n          listeners.splice(listeners.indexOf(listener), 1)\n        }\n      }\n    }\n  }\n}\n\nexport default Event\n","// 2D vector\r\n\r\nimport utils from '../utils.js'\r\n\r\nclass Vector {\r\n  constructor (x = 0, y = 0) {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n\r\n  clone () {\r\n    return new Vector(this.x, this.y)\r\n  }\r\n\r\n  add (v) {\r\n    this.x += v.x\r\n    this.y += v.y\r\n    return this\r\n  }\r\n\r\n  set (x, y) {\r\n    this.x = x\r\n    this.y = y\r\n    return this\r\n  }\r\n\r\n  offset (dx, dy) {\r\n    this.x += dx\r\n    this.y += dy\r\n    return this\r\n  }\r\n\r\n  copy (v) {\r\n    this.x = v.x\r\n    this.y = v.y\r\n    return this\r\n  }\r\n\r\n  multiplyScalar (scalar) {\r\n    this.x *= scalar\r\n    this.y *= scalar\r\n    return this\r\n  }\r\n\r\n  project (obj) {\r\n    this.x *= obj.scale.x\r\n    this.y *= obj.scale.y\r\n    // rotation\r\n    let len = utils.bevel(this.x, this.y)\r\n    let a = Math.atan2(this.y, this.x) + obj.rotation\r\n    this.x = len * Math.cos(a)\r\n    this.y = len * Math.sin(a)\r\n    // translate\r\n    this.x += obj.position.x\r\n    this.y += obj.position.y\r\n    return this\r\n  }\r\n\r\n  unProject (obj) {\r\n    // translate\r\n    this.x -= obj.position.x\r\n    this.y -= obj.position.y\r\n    // rotation\r\n    let len = utils.bevel(this.x, this.y)\r\n    let a = Math.atan2(this.y, this.x) - obj.rotaion\r\n    this.x = len * Math.cos(a)\r\n    this.y = len * Math.sin(a)\r\n    // scale\r\n    this.x /= obj.scale.x\r\n    this.y /= obj.scale.y\r\n    return this\r\n  }\r\n}\r\n\r\nexport default Vector\r\n","// axis aligned bounding box\r\n\r\nimport Vector from '../math/Vector.js'\r\n\r\nclass Bounds {\r\n  constructor (target) {\r\n    this.target = target\r\n\r\n    // TODO use min, max: Vector\r\n    this.x1 = this.y1 = this.x2 = this.y2 = 0\r\n    this.isEmpty = true\r\n\r\n    this.point1 = new Vector()\r\n    this.point2 = new Vector()\r\n\r\n    this.update()\r\n    this.bindEvent()\r\n  }\r\n\r\n  containsPoint (p) {\r\n    return this.x1 < p.x && this.x2 > p.x &&\r\n      this.y1 < p.y && this.y2 > p.y\r\n  }\r\n\r\n  update () {\r\n    this.clear()\r\n    switch (this.target.type) {\r\n      case 'Line':\r\n      case 'Triangle':\r\n      case 'Rectangle':\r\n        for (let v in this.target.points) {\r\n          this.expandByPoint(v)\r\n        }\r\n        break\r\n      case 'Circle':\r\n      case 'Bow':\r\n      case 'Fan':\r\n        this.expandByCircle(this.target)\r\n        break\r\n      case 'Polyline':\r\n      case 'Polygon':\r\n        for (let v in this.target.vertices) {\r\n          this.expandByPoint(v)\r\n        }\r\n        break\r\n      case 'Ellipse':\r\n        this.x1 = -this.target.radiusX\r\n        this.x2 = this.target.radiusX\r\n        this.y1 = -this.target.radiusY\r\n        this.y2 = this.target.radiusY\r\n        break\r\n      default:\r\n        console.warn(`Bu.Bounds: not supported shape type ${ this.target.type }`)\r\n    }\r\n  }\r\n\r\n  bindEvent () {\r\n    switch (this.target.type) {\r\n      case 'Circle':\r\n      case 'Bow':\r\n      case 'Fan':\r\n        this.target.on('centerChanged', this.update)\r\n        this.target.on('radiusChanged', this.update)\r\n        break\r\n      case 'Ellipse':\r\n        this.target.on('changed', this.update)\r\n    }\r\n  }\r\n\r\n  clear () {\r\n    this.x1 = this.y1 = this.x2 = this.y2 = 0\r\n    this.isEmpty = true\r\n    return this\r\n  }\r\n\r\n  expandByPoint (v) {\r\n    if (this.isEmpty) {\r\n      this.isEmpty = false\r\n      this.x1 = this.x2 = v.x\r\n      this.y1 = this.y2 = v.y\r\n    } else {\r\n      if (v.x < this.x1) this.x1 = v.x\r\n      if (v.x > this.x2) this.x2 = v.x\r\n      if (v.y < this.y1) this.y1 = v.y\r\n      if (v.y > this.y2) this.y2 = v.y\r\n    }\r\n    return this\r\n  }\r\n\r\n  expandByCircle (c) {\r\n    let center = c.center\r\n    let radius = c.radius\r\n    if (this.isEmpty) {\r\n      this.isEmpty = false\r\n      this.x1 = center.x - radius\r\n      this.x2 = center.x + radius\r\n      this.y1 = center.y - radius\r\n      this.y2 = center.y + radius\r\n    } else {\r\n      if (center.x - radius < this.x1) this.x1 = center.x - radius\r\n      if (center.x + radius > this.x2) this.x2 = center.x + radius\r\n      if (center.y - radius < this.y1) this.y1 = center.y - radius\r\n      if (center.y + radius > this.y2) this.y2 = center.y + radius\r\n    }\r\n    return this\r\n  }\r\n}\r\n\r\nexport default Bounds\r\n","// Add color to the shapes\n// This object is dedicated to mixed-in the Object2D.\n\nimport Bu from '../base/Bu.js'\n\nlet Styled = function () {\n  this.strokeStyle = Styled.DEFAULT_STROKE_STYLE\n  this.fillStyle = Styled.DEFAULT_FILL_STYLE\n  this.dashStyle = false\n  this.dashFlowSpeed = 0\n  this.lineWidth = 1\n\n  this.dashOffset = 0\n\n  // Set/copy style from other style\n  this.style = function (style) {\n    if (typeof style === 'string') {\n      style = Bu.styles[style]\n      if (!style) {\n        style = Bu.styles.default\n        console.warn(`Styled: Bu.styles.${ style } doesn't exists, fell back to default.`)\n      }\n    } else if (!style) {\n      style = Bu.styles['default']\n    }\n    for (let k of ['strokeStyle', 'fillStyle', 'dashStyle', 'dashFlowSpeed', 'lineWidth']) {\n      this[k] = style[k]\n    }\n    return this\n  }\n\n  // Set the stroke style\n  this.stroke = function (v) {\n    if (v == null) v = true\n    if (Bu.styles && v in Bu.styles) v = Bu.styles[v].strokeStyle\n\n    switch (v) {\n      case true:\n        this.strokeStyle = Styled.DEFAULT_STROKE_STYLE\n        break\n      case false:\n        this.strokeStyle = null\n        break\n      default:\n        this.strokeStyle = v\n    }\n    return this\n  }\n\n  // Set the fill style\n  this.fill = function (v) {\n    if (v == null) v = true\n    if (Bu.styles && v in Bu.styles) v = Bu.styles[v].fillStyle\n\n    switch (v) {\n      case false:\n        this.fillStyle = null\n        break\n      case true:\n        this.fillStyle = Styled.DEFAULT_FILL_STYLE\n        break\n      default:\n        this.fillStyle = v\n    }\n    return this\n  }\n\n  // Set the dash style\n  this.dash = function (v) {\n    if (v == null) v = true\n    else if (Bu.styles && v in Bu.styles) v = Bu.styles[v].dashStyle\n    else if (typeof v === 'number') v = [v, v]\n\n    switch (v) {\n      case false:\n        this.dashStyle = null\n        break\n      case true:\n        this.dashStyle = Styled.DEFAULT_DASH_STYLE\n        break\n      default:\n        this.dashStyle = v\n    }\n    return this\n  }\n\n  // Set the dash flowing speed\n  this.dashFlow = function (speed) {\n    if (speed === true || speed == null) speed = 1\n    else if (speed === false) speed = 0\n\n    Bu.dashFlowManager.setSpeed(this, speed)\n    return this\n  }\n\n  // Set the lineWidth\n  this.setLineWidth = function (w) {\n    this.lineWidth = w\n    return this\n  }\n\n  return this\n}\n\nStyled.DEFAULT_STROKE_STYLE = '#048'\nStyled.DEFAULT_FILL_STYLE = 'rgba(64, 128, 192, 0.5)'\nStyled.DEFAULT_DASH_STYLE = [8, 4]\n\nexport default Styled\n","// Base class of all shapes and other renderable objects\r\n\r\nimport Bu from '../base/Bu.js'\r\nimport utils from '../utils.js'\r\n\r\nimport Bounds from '../math/Bounds.js'\r\nimport Vector from '../math/Vector.js'\r\n\r\nimport Styled from './Styled.js'\r\nimport Event from './Event.js'\r\n\r\nclass Object2D {\r\n  constructor () {\r\n    Styled.apply(this)\r\n    Event.apply(this)\r\n\r\n    this.visible = true\r\n    this.opacity = 1\r\n\r\n    this.position = new Vector()\r\n    this.rotation = 0\r\n    this._scale = new Vector(1, 1)\r\n    this.skew = new Vector()\r\n    // this.toWorldMatrix = new Matrix()\r\n\r\n    // geometry related\r\n    this.bounds = null // used to accelerate the hit testing\r\n    this.keyPoints = null\r\n\r\n    // hierarchy\r\n    this.children = []\r\n    this.parent = null\r\n  }\r\n\r\n  // Translate an object\r\n  translate (dx, dy) {\r\n    this.position.x += dx\r\n    this.position.y += dy\r\n    return this\r\n  }\r\n\r\n  // Rotate an object\r\n  rotate (da) {\r\n    this.rotation += da\r\n    return this\r\n  }\r\n\r\n  // Scale an object by\r\n  scaleBy (ds) {\r\n    this.scale *= ds\r\n    return this\r\n  }\r\n\r\n  // Scale an object to\r\n  scaleTo (s) {\r\n    this.scale = s\r\n    return this\r\n  }\r\n\r\n  // Get the root node of the scene tree\r\n  getScene () {\r\n    let node = this\r\n    while (true) {\r\n      if (node.type === 'Scene') { // TODO circular reference\r\n        break\r\n      }\r\n      node = node.parent\r\n    }\r\n    return node\r\n  }\r\n\r\n  // Add object(s) to children\r\n  addChild (shape) {\r\n    if (utils.isArray(shape)) {\r\n      for (let s of shape) {\r\n        this.children.push(s)\r\n        s.parent = this\r\n      }\r\n    } else {\r\n      this.children.push(shape)\r\n      shape.parent = this\r\n    }\r\n    return this\r\n  }\r\n\r\n  // Remove object from children\r\n  removeChild (shape) {\r\n    let index = this.children.indexOf(shape)\r\n    if (index > -1) this.children.splice(index, 1)\r\n    return this\r\n  }\r\n\r\n  // Apply an animation on this object\r\n  // The type of `anim` may be:\r\n  //     1. Preset animations: the animation name(string type), ie. key in `Bu.animations`\r\n  //     2. Custom animations: the animation object of `Animation` type\r\n  //     3. Multiple animations: An array whose children are above two types\r\n  animate (anim, args) {\r\n    if (!utils.isArray(args)) args = [args]\r\n    if (typeof anim === 'string') {\r\n      if (anim in Bu.animations) {\r\n        Bu.animations[anim].applyTo(this, args)\r\n      } else {\r\n        console.warn(`Bu.animations[\"${ anim }\"] doesn't exists.`)\r\n      }\r\n    } else if (utils.isArray(anim)) {\r\n      for (let i in anim) {\r\n        if (!anim.hasOwnProperty(i)) continue\r\n        this.animate(anim[i], args)\r\n      }\r\n    } else {\r\n      anim.applyTo(this, args)\r\n    }\r\n    return this\r\n  }\r\n\r\n  // Create Bounds for this object\r\n  createBounds () {\r\n    this.bounds = new Bounds(this)\r\n    return this\r\n  }\r\n\r\n  // Hit testing with unprojections\r\n  hitTest (v) {\r\n    let renderer = this.getScene().renderer\r\n    v.set(...renderer.projectToWorld(v.x, v.y))\r\n    v.project(renderer.camera)\r\n    v.unProject(this)\r\n    return this.containsPoint(v)\r\n  }\r\n\r\n  // Hit testing in the same coordinate\r\n  containsPoint (p) {\r\n    if (this.bounds && !this.bounds.containsPoint(p)) {\r\n      return false\r\n    } else if (this._containsPoint) {\r\n      return this._containsPoint(p)\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n}\r\n\r\nObject2D.prototype.type = 'Object2D'\r\nObject2D.prototype.fillable = false\r\n\r\nObject2D.property('scale', {\r\n  get: function () {\r\n    return this._scale\r\n  },\r\n  set: function (val) {\r\n    if (typeof val === 'number') {\r\n      this._scale.x = this._scale.y = val\r\n      return this\r\n    } else {\r\n      this._scale = val\r\n      return this\r\n    }\r\n  },\r\n})\r\n\r\nexport default Object2D\r\n","// Camera: change the view range in the scene\r\n\r\nimport Object2D from '../base/Object2D.js'\r\n\r\nclass Camera extends Object2D {\r\n  constructor () {\r\n    super()\r\n    this.type = 'Camera'\r\n  }\r\n}\r\n\r\nexport default Camera\r\n","// Scene is the root of the object tree\r\n\r\nimport Object2D from '../base/Object2D.js'\r\n\r\nclass Scene extends Object2D {\r\n  constructor () {\r\n    super()\r\n    this.type = 'Scene'\r\n    this.background = Bu.config.background\r\n    this.renderer = null\r\n  }\r\n}\r\n\r\nexport default Scene\r\n","# Used to render all the drawable objects to the canvas\r\n\r\nimport Bu from '../base/Bu.js'\r\n\r\nimport utils from '../utils.js'\r\nimport Event from '../base/Event.js'\r\n\r\nimport Camera from '../core/Camera.js'\r\nimport Scene from '../core/Scene.js'\r\n\r\nclass Renderer\r\n\r\n  constructor: () ->\r\n    Event.apply @\r\n    @type = 'Renderer'\r\n\r\n    # API\r\n    @scene = new Scene @\r\n    @camera = new Camera\r\n    @tickCount = 0\r\n    @isRunning = yes\r\n    @pixelRatio = window.devicePixelRatio or 1\r\n    @clipMeter = new ClipMeter() if ClipMeter?\r\n\r\n    # Receive options\r\n    options = utils.combineOptions arguments,\r\n      container: 'body'\r\n      showBounds: no\r\n      imageSmoothing: yes\r\n\r\n    # Copy options\r\n    for name in ['container', 'width', 'height', 'showBounds']\r\n      @[name] = options[name]\r\n\r\n    # If options.width is not given, then fillParent is true\r\n    @fillParent = typeof options.width != 'number'\r\n\r\n    # Convert width and height from dip(device independent pixels) to physical pixels\r\n    @pixelWidth = @width * @pixelRatio\r\n    @pixelHeight = @height * @pixelRatio\r\n\r\n    # Set canvas dom\r\n    @dom = document.createElement 'canvas'\r\n    @dom.style.cursor = Bu.config.cursor\r\n    @dom.style.boxSizing = 'content-box'\r\n    @dom.oncontextmenu = -> false\r\n\r\n    # Set context\r\n    @context = @dom.getContext '2d'\r\n    @context.textBaseline = 'top'\r\n\r\n    # Set container dom\r\n    @container = document.querySelector @container if typeof @container == 'string'\r\n    if @fillParent and @container == document.body\r\n      domHtml = document.querySelector('html')\r\n      domBody = document.querySelector('body')\r\n      domBody.style.margin = '0'\r\n      domBody.style.overflow = 'hidden'\r\n      domHtml.style.width = domHtml.style.height =\r\n        domBody.style.width = domBody.style.height = '100%'\r\n\r\n    # Set sizes for renderer property, dom attribute and dom style\r\n    onResize = =>\r\n      canvasRatio = @dom.height / @dom.width\r\n      containerRatio = @container.clientHeight / @container.clientWidth\r\n      if containerRatio < canvasRatio\r\n        @height = @container.clientHeight\r\n        @width = @height / containerRatio\r\n      else\r\n        @width = @container.clientWidth\r\n        @height = @width * containerRatio\r\n      @pixelWidth = @dom.width = @width * @pixelRatio\r\n      @pixelHeight = @dom.height = @height * @pixelRatio\r\n      @dom.style.width = @width + 'px'\r\n      @dom.style.height = @height + 'px'\r\n      @render()\r\n\r\n    if not @fillParent\r\n      @dom.style.width = @width + 'px'\r\n      @dom.style.height = @height + 'px'\r\n      @dom.width = @pixelWidth\r\n      @dom.height = @pixelHeight\r\n    else\r\n      @pixelWidth = @container.clientWidth\r\n      @pixelHeight = @container.clientHeight\r\n      @width = @pixelWidth / @pixelRatio\r\n      @height = @pixelHeight / @pixelRatio\r\n      window.addEventListener 'resize', onResize\r\n      @dom.addEventListener 'DOMNodeInserted', onResize\r\n\r\n    # Run the loop\r\n    tick = =>\r\n      if @isRunning\r\n        @clipMeter.start() if @clipMeter?\r\n        @render()\r\n        @trigger 'update', @\r\n        @tickCount += 1\r\n        @clipMeter.tick() if @clipMeter?\r\n      requestAnimationFrame tick\r\n    tick()\r\n\r\n    # Append <canvas> dom into the container\r\n    delayed = =>\r\n      @container.appendChild @dom\r\n      @imageSmoothing = options.imageSmoothing\r\n    setTimeout delayed, 1\r\n\r\n    # Hook up with running components\r\n    Bu.animationRunner.hookUp @\r\n    Bu.dashFlowManager.hookUp @\r\n\r\n# Pause/continue/toggle the rendering loop\r\n  pause: -> @isRunning = false\r\n  continue: -> @isRunning = true\r\n  toggle: -> @isRunning = not @isRunning\r\n\r\n# Project from DOM coordinates to world coordinates\r\n  projectToWorld: (x, y) ->\r\n    if (!Bu.config.originAtCenter)\r\n      return [x, y]\r\n    else\r\n      return [x - @width / 2, y - @height / 2]\r\n\r\n# Perform the full render process\r\n  render: ->\r\n    @context.save()\r\n\r\n    # Clear the canvas\r\n    @clearCanvas()\r\n\r\n    # Move center from left-top corner to screen center\r\n    @context.translate @pixelWidth / 2, @pixelHeight / 2 if Bu.config.originAtCenter\r\n\r\n    # Zoom the canvas with devicePixelRatio to support high definition screen\r\n    @context.scale @pixelRatio, @pixelRatio\r\n\r\n    # Transform the camera\r\n    @context.scale 1 / @camera.scale.x, 1 / @camera.scale.y\r\n    @context.rotate -@camera.rotation\r\n    @context.translate -@camera.position.x, -@camera.position.y\r\n\r\n    # Draw the scene tree\r\n    @drawShape @scene\r\n    @context.restore()\r\n    @\r\n\r\n# Clear the canvas\r\n  clearCanvas: ->\r\n    @context.fillStyle = @scene.background\r\n    @context.fillRect 0, 0, @pixelWidth, @pixelHeight\r\n    @\r\n\r\n# Draw an array of drawables\r\n  drawShapes: (shapes) =>\r\n    if shapes?\r\n      for shape in shapes\r\n        @context.save()\r\n        @drawShape shape\r\n        @context.restore()\r\n    @\r\n\r\n# Draw an drawable to the canvas\r\n  drawShape: (shape) =>\r\n    return @ unless shape.visible\r\n\r\n    @context.translate shape.position.x, shape.position.y\r\n    @context.rotate shape.rotation\r\n    sx = shape.scale.x\r\n    sy = shape.scale.y\r\n    if sx / sy > 100 or sx / sy < 0.01\r\n      sx = 0 if Math.abs(sx) < 0.02\r\n      sy = 0 if Math.abs(sy) < 0.02\r\n    @context.scale sx, sy\r\n\r\n    @context.globalAlpha *= shape.opacity\r\n    if shape.strokeStyle?\r\n      @context.strokeStyle = shape.strokeStyle\r\n      @context.lineWidth = shape.lineWidth\r\n      @context.lineCap = shape.lineCap if shape.lineCap?\r\n      @context.lineJoin = shape.lineJoin if shape.lineJoin?\r\n\r\n    @context.beginPath()\r\n\r\n    switch shape.type\r\n      when 'Point' then @drawPoint shape\r\n      when 'Line' then @drawLine shape\r\n      when 'Circle' then @drawCircle shape\r\n      when 'Ellipse' then @drawEllipse shape\r\n      when 'Triangle' then @drawTriangle shape\r\n      when 'Rectangle' then @drawRectangle shape\r\n      when 'Fan' then @drawFan shape\r\n      when 'Bow' then @drawBow shape\r\n      when 'Polygon' then @drawPolygon shape\r\n      when 'Polyline' then @drawPolyline shape\r\n      when 'Spline' then @drawSpline shape\r\n      when 'PointText' then @drawPointText shape\r\n      when 'Image' then @drawImage shape\r\n      when 'Object2D', 'Scene' # then do nothing\r\n      else\r\n        console.log 'drawShapes(): unknown shape: ', shape.type, shape\r\n\r\n    if shape.fillStyle? and shape.fillable\r\n      @context.fillStyle = shape.fillStyle\r\n      @context.fill()\r\n\r\n    if shape.dashStyle\r\n      @context.lineDashOffset = shape.dashOffset\r\n      @context.setLineDash? shape.dashStyle\r\n      @context.stroke()\r\n      @context.setLineDash []\r\n    else if shape.strokeStyle?\r\n      @context.stroke()\r\n\r\n    @drawShapes shape.children if shape.children?\r\n    @drawShapes shape.keyPoints if Bu.config.showKeyPoints\r\n    @drawBounds shape.bounds if @showBounds and shape.bounds?\r\n    @\r\n\r\n  drawPoint: (shape) ->\r\n    @context.arc shape.x, shape.y, utils.POINT_RENDER_SIZE, 0, utils.TWO_PI\r\n    @\r\n\r\n  drawLine: (shape) ->\r\n    @context.moveTo shape.points[0].x, shape.points[0].y\r\n    @context.lineTo shape.points[1].x, shape.points[1].y\r\n    @\r\n\r\n  drawCircle: (shape) ->\r\n    @context.arc shape.cx, shape.cy, shape.radius, 0, utils.TWO_PI\r\n    @\r\n\r\n  drawEllipse: (shape) ->\r\n    @context.ellipse 0, 0, shape.radiusX, shape.radiusY, 0, utils.TWO_PI, no\r\n    @\r\n\r\n  drawTriangle: (shape) ->\r\n    @context.lineTo shape.points[0].x, shape.points[0].y\r\n    @context.lineTo shape.points[1].x, shape.points[1].y\r\n    @context.lineTo shape.points[2].x, shape.points[2].y\r\n    @context.closePath()\r\n    @\r\n\r\n  drawRectangle: (shape) ->\r\n    return @drawRoundRectangle shape if shape.cornerRadius != 0\r\n    @context.rect shape.pointLT.x, shape.pointLT.y, shape.size.width, shape.size.height\r\n    @\r\n\r\n  drawRoundRectangle: (shape) ->\r\n    x1 = shape.pointLT.x\r\n    x2 = shape.pointRB.x\r\n    y1 = shape.pointLT.y\r\n    y2 = shape.pointRB.y\r\n    r = shape.cornerRadius\r\n\r\n    @context.moveTo x1, y1 + r\r\n    @context.arcTo x1, y1, x1 + r, y1, r\r\n    @context.lineTo x2 - r, y1\r\n    @context.arcTo x2, y1, x2, y1 + r, r\r\n    @context.lineTo x2, y2 - r\r\n    @context.arcTo x2, y2, x2 - r, y2, r\r\n    @context.lineTo x1 + r, y2\r\n    @context.arcTo x1, y2, x1, y2 - r, r\r\n    @context.closePath()\r\n\r\n    @context.setLineDash? shape.dashStyle if shape.strokeStyle? and shape.dashStyle\r\n    @\r\n\r\n  drawFan: (shape) ->\r\n    @context.arc shape.cx, shape.cy, shape.radius, shape.aFrom, shape.aTo\r\n    @context.lineTo shape.cx, shape.cy\r\n    @context.closePath()\r\n    @\r\n\r\n  drawBow: (shape) ->\r\n    @context.arc shape.cx, shape.cy, shape.radius, shape.aFrom, shape.aTo\r\n    @context.closePath()\r\n    @\r\n\r\n\r\n  drawPolygon: (shape) ->\r\n    for point in shape.vertices\r\n      @context.lineTo point.x, point.y\r\n    @context.closePath()\r\n    @\r\n\r\n  drawPolyline: (shape) ->\r\n    for point in shape.vertices\r\n      @context.lineTo point.x, point.y\r\n    @\r\n\r\n  drawSpline: (shape) ->\r\n    if shape.strokeStyle?\r\n      len = shape.vertices.length\r\n      if len == 2\r\n        @context.moveTo shape.vertices[0].x, shape.vertices[0].y\r\n        @context.lineTo shape.vertices[1].x, shape.vertices[1].y\r\n      else if len > 2\r\n        @context.moveTo shape.vertices[0].x, shape.vertices[0].y\r\n        for i in [1..len - 1]\r\n          @context.bezierCurveTo(\r\n            shape.controlPointsBehind[i - 1].x\r\n            shape.controlPointsBehind[i - 1].y\r\n            shape.controlPointsAhead[i].x\r\n            shape.controlPointsAhead[i].y\r\n            shape.vertices[i].x\r\n            shape.vertices[i].y\r\n          )\r\n    @\r\n\r\n  drawPointText: (shape) ->\r\n    font = shape.font or Bu.config.font\r\n\r\n    if typeof font == 'string'\r\n      @context.textAlign = shape.textAlign\r\n      @context.textBaseline = shape.textBaseline\r\n      @context.font = font\r\n\r\n      if shape.strokeStyle?\r\n        @context.strokeText shape.text, shape.x, shape.y\r\n      if shape.fillStyle?\r\n        @context.fillStyle = shape.fillStyle\r\n        @context.fillText shape.text, shape.x, shape.y\r\n    else if font instanceof Bu.SpriteSheet and font.ready\r\n      textWidth = font.measureTextWidth shape.text\r\n      xOffset = switch shape.textAlign\r\n        when 'left' then 0\r\n        when 'center' then -textWidth / 2\r\n        when 'right' then -textWidth\r\n      yOffset = switch shape.textBaseline\r\n        when 'top' then 0\r\n        when 'middle' then -font.height / 2\r\n        when 'bottom' then -font.height\r\n      for i in [0...shape.text.length]\r\n        char = shape.text[i]\r\n        charBitmap = font.getFrameImage char\r\n        if charBitmap?\r\n          @context.drawImage charBitmap, shape.x + xOffset, shape.y + yOffset\r\n          xOffset += charBitmap.width\r\n        else\r\n          xOffset += 10\r\n    @\r\n\r\n  drawImage: (shape) ->\r\n    if shape.ready\r\n      w = shape.size.width\r\n      h = shape.size.height\r\n      dx = -w * shape.pivot.x\r\n      dy = -h * shape.pivot.y\r\n      @context.drawImage shape.image, dx, dy, w, h\r\n    @\r\n\r\n  drawBounds: (bounds) ->\r\n    @context.beginPath()\r\n    @context.strokeStyle = Renderer.BOUNDS_STROKE_STYLE\r\n    @context.setLineDash? Renderer.BOUNDS_DASH_STYLE\r\n    @context.rect bounds.x1, bounds.y1, bounds.x2 - bounds.x1, bounds.y2 - bounds.y1\r\n    @context.stroke()\r\n    @\r\n\r\n  # property\r\n\r\n  @property 'imageSmoothing',\r\n    get: -> @_imageSmoothing\r\n    set: (val) ->\r\n      @_imageSmoothing = @context.imageSmoothingEnabled = val\r\n\r\n#----------------------------------------------------------------------\r\n# Static members\r\n#----------------------------------------------------------------------\r\n\r\n# Stroke style of bounds\r\nRenderer.BOUNDS_STROKE_STYLE = 'red'\r\n\r\n# Dash style of bounds\r\nRenderer.BOUNDS_DASH_STYLE = [6, 6]\r\n\r\nexport default Renderer\r\n","# Manage the user input, like mouse, keyboard, touchscreen etc\n\nclass InputManager\n\n  constructor: () ->\n    @keyStates = []\n\n    window.addEventListener 'keydown', (ev) =>\n      @keyStates[ev.keyCode] = yes\n    window.addEventListener 'keyup', (ev) =>\n      @keyStates[ev.keyCode] = no\n\n# To detect whether a key is pressed down\n  isKeyDown: (key) ->\n    keyCode = @keyToKeyCode key\n    @keyStates[keyCode]\n\n# Convert from keyIdentifiers/keyValues to keyCode\n  keyToKeyCode: (key) ->\n    key = @keyAliasToKeyMap[key] or key\n    keyCode = @keyToKeyCodeMap[key]\n\n# Recieve and bind the mouse/keyboard events listeners\n  handleAppEvents: (app, events) ->\n    keydownListeners = {}\n    keyupListeners = {}\n\n    window.addEventListener 'keydown', (ev) =>\n      keydownListeners[ev.keyCode]?.call app, ev\n    window.addEventListener 'keyup', (ev) =>\n      keyupListeners[ev.keyCode]?.call app, ev\n\n    for type of events\n      if type in ['mousedown', 'mousemove', 'mouseup', 'mousewheel']\n        app.$renderer.dom.addEventListener type, events[type].bind(app)\n      else if type in ['keydown', 'keyup']\n        window.addEventListener type, events[type].bind(app)\n      else if type.indexOf('keydown.') == 0\n        key = type.substring 8\n        keyCode = @keyToKeyCode key\n        keydownListeners[keyCode] = events[type]\n      else if type.indexOf('keyup.') == 0\n        key = type.substring 6\n        keyCode = @keyToKeyCode key\n        keyupListeners[keyCode] = events[type]\n\n# Map from keyIdentifiers/keyValues to keyCode\n  keyToKeyCodeMap:\n    Backspace: 8\n    Tab: 9\n    Enter: 13\n    Shift: 16\n    Control: 17\n    Alt: 18\n    CapsLock: 20\n    Escape: 27\n    ' ': 32  # Space\n    PageUp: 33\n    PageDown: 34\n    End: 35\n    Home: 36\n    ArrowLeft: 37\n    ArrowUp: 38\n    ArrowRight: 39\n    ArrowDown: 40\n    Delete: 46\n\n    1: 49\n    2: 50\n    3: 51\n    4: 52\n    5: 53\n    6: 54\n    7: 55\n    8: 56\n    9: 57\n    A: 65\n    B: 66\n    C: 67\n    D: 68\n    E: 69\n    F: 70\n    G: 71\n    H: 72\n    I: 73\n    J: 74\n    K: 75\n    L: 76\n    M: 77\n    N: 78\n    O: 79\n    P: 80\n    Q: 81\n    R: 82\n    S: 83\n    T: 84\n    U: 85\n    V: 86\n    W: 87\n    X: 88\n    Y: 89\n    Z: 90\n\n    F1: 112\n    F2: 113\n    F3: 114\n    F4: 115\n    F5: 116\n    F6: 117\n    F7: 118\n    F8: 119\n    F9: 120\n    F10: 121\n    F11: 122\n    F12: 123\n\n    '`': 192\n    '=': 187\n    ',': 188\n    '-': 189\n    '.': 190\n    '/': 191\n    ';': 186\n    \"'\": 222\n    '[': 219\n    ']': 221\n    '\\\\': 220\n\n# Map from not standard, but commonly known keyValues/keyIdentifiers to keyCode\n  keyAliasToKeyMap:\n    Ctrl: 'Control'     # 17\n    Ctl: 'Control'     # 17\n    Esc: 'Escape'      # 27\n    Space: ' '           # 32\n    PgUp: 'PageUp'      # 33\n    'Page Up': 'PageUp'      # 33\n    PgDn: 'PageDown'    # 34\n    'Page Down': 'PageDown'    # 34\n    Left: 'ArrowLeft'   # 37\n    Up: 'ArrowUp'     # 38\n    Right: 'ArrowRight'  # 39\n    Down: 'ArrowDown'   # 40\n    Del: 'Delete' # 46\n\nexport default InputManager\n","// Bu\r\n\r\n// renderer:\r\n//   width/height\r\n//   imageSmoothing\r\n// data\r\n// methods\r\n// objects\r\n// scene\r\n// events\r\n// init\r\n// update\r\n\r\nimport Renderer from '../core/Renderer.coffee'\r\nimport Scene from '../core/Scene.js'\r\n\r\nimport InputManager from '../input/InputManager.coffee'\r\n\r\n// Execute a callback function when the document is ready\r\nfunction ready (cb, context, args) {\r\n  if (document.readyState === 'complete') {\r\n    cb.apply(context, args)\r\n  } else {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      cb.apply(context, args)\r\n    })\r\n  }\r\n}\r\n\r\nclass Bu {\r\n  constructor ($options = {}) {\r\n    this.$options = $options\r\n    for (let k of ['renderer', 'data', 'objects', 'methods', 'events']) {\r\n      this.$options[k] = this.$options[k] || {}\r\n    }\r\n    if (this.$options.el) {\r\n      this.$options.renderer.container = this.$options.el\r\n    }\r\n    this.$inputManager = new InputManager()\r\n    ready(this.init, this)\r\n    Bu.$bues.push(this)\r\n  }\r\n\r\n  init () {\r\n    // scene\r\n    let scene = new Scene()\r\n\r\n    // renderer\r\n    this.$renderer = new Renderer(this.$options.renderer)\r\n    this.$renderer.scene = scene\r\n    scene.renderer = this.$renderer\r\n\r\n    // data\r\n    if (typeof this.$options.data === 'function') {\r\n      this.$options.data = this.$options.data.apply(this)\r\n    }\r\n    for (let k in this.$options.data) {\r\n      this[k] = this.$options.data[k]\r\n    }\r\n\r\n    // methods\r\n    for (let k in this.$options.methods) {\r\n      this[k] = this.$options.methods[k]\r\n    }\r\n\r\n    // objects\r\n    let objects = typeof this.$options.objects === 'function' ? this.$options.objects.apply(this) : this.$options.objects\r\n    for (let name in objects) {\r\n      this[name] = objects[name]\r\n    }\r\n\r\n    // create default scene tree\r\n    if (!this.$options.scene) {\r\n      this.$options.scene = {}\r\n      for (let name in objects) {\r\n        this.$options.scene[name] = {}\r\n      }\r\n    }\r\n\r\n    // assemble scene tree\r\n    // TODO use an algorithm to avoid circular structure\r\n    let assembleObjects = (children, parent) => {\r\n      let results = []\r\n      for (let name in children) {\r\n        if (!children.hasOwnProperty(name)) continue\r\n        parent.addChild(objects[name])\r\n        results.push(assembleObjects(children[name], objects[name]))\r\n      }\r\n      return results\r\n    }\r\n    assembleObjects(this.$options.scene, this.$renderer.scene)\r\n\r\n    // init\r\n    if (this.$options.init) this.$options.init.call(this)\r\n\r\n    // events\r\n    this.$inputManager.handleAppEvents(this, this.$options.events)\r\n\r\n    // update\r\n    if (this.$options.update) {\r\n      this.$renderer.on('update', () => {\r\n        this.$options.update.apply(this, arguments)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default Bu\r\n","# Run the animation tasks\n\nimport utils from '../utils.js'\n\nclass AnimationRunner\n\n  constructor: () ->\n    @runningAnimations = []\n\n  add: (task) ->\n    task.init()\n    if task.animation.isLegal()\n      task.startTime = utils.now()\n      @runningAnimations.push task\n    else\n      console.error 'AnimationRunner: animation setting is illegal: ', task.animation\n\n  update: ->\n    now = utils.now()\n    for task in @runningAnimations\n      continue if task.finished\n\n      anim = task.animation\n      t = (now - task.startTime) / (anim.duration * 1000)\n      if t >= 1\n        finish = true\n        if anim.repeat\n          t = 0\n          task.startTime = utils.now()\n        else\n# TODO remove the finished tasks out\n          t = 1\n          task.finished = yes\n\n      if anim.easing == true\n        t = easingFunctions[DEFAULT_EASING_FUNCTION] t\n      else if easingFunctions[anim.easing]?\n        t = easingFunctions[anim.easing] t\n\n      task.t = t\n      task.interpolate()\n\n      anim.update.call task.target, task\n      if finish then anim.finish?.call task.target, task\n\n# Hook up on an renderer, remove own setInternal\n  hookUp: (renderer) ->\n    renderer.on 'update', => @update()\n\n  #----------------------------------------------------------------------\n  # Private variables\n  #----------------------------------------------------------------------\n\n  DEFAULT_EASING_FUNCTION = 'quad'\n  easingFunctions =\n    quadIn: (t) -> t * t\n    quadOut: (t) -> t * (2 - t)\n    quad: (t) ->\n      if t < 0.5\n        2 * t * t\n      else\n        -2 * t * t + 4 * t - 1\n\n    cubicIn: (t) -> t ** 3\n    cubicOut: (t) -> (t - 1) ** 3 + 1\n    cubic: (t) ->\n      if t < 0.5\n        4 * t ** 3\n      else\n        4 * (t - 1) ** 3 + 1\n\n    sineIn: (t) -> Math.sin((t - 1) * utils.HALF_PI) + 1\n    sineOut: (t) -> Math.sin t * utils.HALF_PI\n    sine: (t) ->\n      if t < 0.5\n        (Math.sin((t * 2 - 1) * utils.HALF_PI) + 1) / 2\n      else\n        Math.sin((t - 0.5) * Math.PI) / 2 + 0.5\n\n# TODO add quart, quint, expo, circ, back, elastic, bounce\n\nexport default AnimationRunner\n","# Manage an Object2D list and update its dashOffset\n\nclass DashFlowManager\n\n  constructor: ->\n    @flowingObjects = []\n\n  setSpeed: (target, speed) ->\n    target.dashFlowSpeed = speed\n    i = @flowingObjects.indexOf target\n    if speed != 0\n      @flowingObjects.push target if i == -1\n    else\n      @flowingObjects.splice(i, 1) if i > -1\n\n  update: ->\n    for o in @flowingObjects\n      o.dashOffset += o.dashFlowSpeed\n\n# Hook up on an renderer, remove own setInternal\n  hookUp: (renderer) ->\n    renderer.on 'update', => @update()\n\nexport default DashFlowManager\n","// Parse and serialize color\r\n\r\nimport utils from '../utils.js'\r\n\r\nconst RE_HSL = /hsl\\(\\s*(\\d+),\\s*(\\d+)%,\\s*(\\d+)%\\s*\\)/i\r\nconst RE_HSLA = /hsla\\(\\s*(\\d+),\\s*(\\d+)%,\\s*(\\d+)%\\s*,\\s*([.\\d]+)\\s*\\)/i\r\nconst RE_RGB = /rgb\\(\\s*(\\d+),\\s*(\\d+),\\s*(\\d+)\\s*\\)/i\r\nconst RE_RGBA = /rgba\\(\\s*(\\d+),\\s*(\\d+),\\s*(\\d+)\\s*,\\s*([.\\d]+)\\s*\\)/i\r\nconst RE_RGB_PER = /rgb\\(\\s*(\\d+)%,\\s*(\\d+)%,\\s*(\\d+)%\\s*\\)/i\r\nconst RE_RGBA_PER = /rgba\\(\\s*(\\d+)%,\\s*(\\d+)%,\\s*(\\d+)%\\s*,\\s*([.\\d]+)\\s*\\)/i\r\nconst RE_HEX3 = /#([0-9A-F]{3})\\s*$/i\r\nconst RE_HEX6 = /#([0-9A-F]{6})\\s*$/i\r\n\r\nconst CSS3_COLORS = {\r\n  transparent: [0, 0, 0, 0],\r\n\r\n  aliceblue: [240, 248, 255],\r\n  antiquewhite: [250, 235, 215],\r\n  aqua: [0, 255, 255],\r\n  aquamarine: [127, 255, 212],\r\n  azure: [240, 255, 255],\r\n  beige: [245, 245, 220],\r\n  bisque: [255, 228, 196],\r\n  black: [0, 0, 0],\r\n  blanchedalmond: [255, 235, 205],\r\n  blue: [0, 0, 255],\r\n  blueviolet: [138, 43, 226],\r\n  brown: [165, 42, 42],\r\n  burlywood: [222, 184, 135],\r\n  cadetblue: [95, 158, 160],\r\n  chartreuse: [127, 255, 0],\r\n  chocolate: [210, 105, 30],\r\n  coral: [255, 127, 80],\r\n  cornflowerblue: [100, 149, 237],\r\n  cornsilk: [255, 248, 220],\r\n  crimson: [220, 20, 60],\r\n  cyan: [0, 255, 255],\r\n  darkblue: [0, 0, 139],\r\n  darkcyan: [0, 139, 139],\r\n  darkgoldenrod: [184, 134, 11],\r\n  darkgray: [169, 169, 169],\r\n  darkgreen: [0, 100, 0],\r\n  darkgrey: [169, 169, 169],\r\n  darkkhaki: [189, 183, 107],\r\n  darkmagenta: [139, 0, 139],\r\n  darkolivegreen: [85, 107, 47],\r\n  darkorange: [255, 140, 0],\r\n  darkorchid: [153, 50, 204],\r\n  darkred: [139, 0, 0],\r\n  darksalmon: [233, 150, 122],\r\n  darkseagreen: [143, 188, 143],\r\n  darkslateblue: [72, 61, 139],\r\n  darkslategray: [47, 79, 79],\r\n  darkslategrey: [47, 79, 79],\r\n  darkturquoise: [0, 206, 209],\r\n  darkviolet: [148, 0, 211],\r\n  deeppink: [255, 20, 147],\r\n  deepskyblue: [0, 191, 255],\r\n  dimgray: [105, 105, 105],\r\n  dimgrey: [105, 105, 105],\r\n  dodgerblue: [30, 144, 255],\r\n  firebrick: [178, 34, 34],\r\n  floralwhite: [255, 250, 240],\r\n  forestgreen: [34, 139, 34],\r\n  fuchsia: [255, 0, 255],\r\n  gainsboro: [220, 220, 220],\r\n  ghostwhite: [248, 248, 255],\r\n  gold: [255, 215, 0],\r\n  goldenrod: [218, 165, 32],\r\n  gray: [128, 128, 128],\r\n  green: [0, 128, 0],\r\n  greenyellow: [173, 255, 47],\r\n  grey: [128, 128, 128],\r\n  honeydew: [240, 255, 240],\r\n  hotpink: [255, 105, 180],\r\n  indianred: [205, 92, 92],\r\n  indigo: [75, 0, 130],\r\n  ivory: [255, 255, 240],\r\n  khaki: [240, 230, 140],\r\n  lavender: [230, 230, 250],\r\n  lavenderblush: [255, 240, 245],\r\n  lawngreen: [124, 252, 0],\r\n  lemonchiffon: [255, 250, 205],\r\n  lightblue: [173, 216, 230],\r\n  lightcoral: [240, 128, 128],\r\n  lightcyan: [224, 255, 255],\r\n  lightgoldenrodyellow: [250, 250, 210],\r\n  lightgray: [211, 211, 211],\r\n  lightgreen: [144, 238, 144],\r\n  lightgrey: [211, 211, 211],\r\n  lightpink: [255, 182, 193],\r\n  lightsalmon: [255, 160, 122],\r\n  lightseagreen: [32, 178, 170],\r\n  lightskyblue: [135, 206, 250],\r\n  lightslategray: [119, 136, 153],\r\n  lightslategrey: [119, 136, 153],\r\n  lightsteelblue: [176, 196, 222],\r\n  lightyellow: [255, 255, 224],\r\n  lime: [0, 255, 0],\r\n  limegreen: [50, 205, 50],\r\n  linen: [250, 240, 230],\r\n  magenta: [255, 0, 255],\r\n  maroon: [128, 0, 0],\r\n  mediumaquamarine: [102, 205, 170],\r\n  mediumblue: [0, 0, 205],\r\n  mediumorchid: [186, 85, 211],\r\n  mediumpurple: [147, 112, 219],\r\n  mediumseagreen: [60, 179, 113],\r\n  mediumslateblue: [123, 104, 238],\r\n  mediumspringgreen: [0, 250, 154],\r\n  mediumturquoise: [72, 209, 204],\r\n  mediumvioletred: [199, 21, 133],\r\n  midnightblue: [25, 25, 112],\r\n  mintcream: [245, 255, 250],\r\n  mistyrose: [255, 228, 225],\r\n  moccasin: [255, 228, 181],\r\n  navajowhite: [255, 222, 173],\r\n  navy: [0, 0, 128],\r\n  oldlace: [253, 245, 230],\r\n  olive: [128, 128, 0],\r\n  olivedrab: [107, 142, 35],\r\n  orange: [255, 165, 0],\r\n  orangered: [255, 69, 0],\r\n  orchid: [218, 112, 214],\r\n  palegoldenrod: [238, 232, 170],\r\n  palegreen: [152, 251, 152],\r\n  paleturquoise: [175, 238, 238],\r\n  palevioletred: [219, 112, 147],\r\n  papayawhip: [255, 239, 213],\r\n  peachpuff: [255, 218, 185],\r\n  peru: [205, 133, 63],\r\n  pink: [255, 192, 203],\r\n  plum: [221, 160, 221],\r\n  powderblue: [176, 224, 230],\r\n  purple: [128, 0, 128],\r\n  red: [255, 0, 0],\r\n  rosybrown: [188, 143, 143],\r\n  royalblue: [65, 105, 225],\r\n  saddlebrown: [139, 69, 19],\r\n  salmon: [250, 128, 114],\r\n  sandybrown: [244, 164, 96],\r\n  seagreen: [46, 139, 87],\r\n  seashell: [255, 245, 238],\r\n  sienna: [160, 82, 45],\r\n  silver: [192, 192, 192],\r\n  skyblue: [135, 206, 235],\r\n  slateblue: [106, 90, 205],\r\n  slategray: [112, 128, 144],\r\n  slategrey: [112, 128, 144],\r\n  snow: [255, 250, 250],\r\n  springgreen: [0, 255, 127],\r\n  steelblue: [70, 130, 180],\r\n  tan: [210, 180, 140],\r\n  teal: [0, 128, 128],\r\n  thistle: [216, 191, 216],\r\n  tomato: [255, 99, 71],\r\n  turquoise: [64, 224, 208],\r\n  violet: [238, 130, 238],\r\n  wheat: [245, 222, 179],\r\n  white: [255, 255, 255],\r\n  whitesmoke: [245, 245, 245],\r\n  yellow: [255, 255, 0],\r\n  yellowgreen: [154, 205, 50],\r\n}\r\n\r\nfunction hsl2rgb (h, s, l) {\r\n  let nh = h % 360 / 360\r\n  let q = l < 0.5 ? l * (1 + s) : l + s - (l * s)\r\n  let p = 2 * l - q\r\n  let t = [nh + 1 / 3, nh, nh - 1 / 3]\r\n  let rgb = []\r\n\r\n  for (let i of [0, 1, 2]) {\r\n    if (t[i] < 0) t[i] += 1\r\n    if (t[i] > 1) t[i] -= 1\r\n  }\r\n\r\n  for (let i of [0, 1, 2]) {\r\n    if (t[i] < 1 / 6) {\r\n      rgb[i] = p + (q - p) * 6 * t[i]\r\n    } else if (t[i] < 0.5) {\r\n      rgb[i] = q\r\n    } else if (t[i] < 2 / 3) {\r\n      rgb[i] = p + (q - p) * 6 * (2 / 3 - t[i])\r\n    } else {\r\n      rgb[i] = p\r\n    }\r\n\r\n    rgb[i] = Math.round(rgb[i] * 255)\r\n  }\r\n\r\n  return rgb\r\n}\r\n\r\n// Private functions\r\n\r\nfunction rgb2hsl (r, g, b) {\r\n  let max = Math.max(r, g, b)\r\n  let min = Math.min(r, g, b)\r\n\r\n  let h\r\n  if (max === min) {\r\n    h = 0\r\n  } else if (max === r && g >= b) {\r\n    h = 60 * (g - b) / (max - min)\r\n  } else if (max === r && g < b) {\r\n    h = 60 * (g - b) / (max - min) + 360\r\n  } else if (max === g) {\r\n    h = 60 * (b - r) / (max - min) + 120\r\n  } else { // if max == b\r\n    h = 60 * (r - g) / (max - min) + 240\r\n  }\r\n\r\n  let l = 0.5 * (max + min)\r\n\r\n  let s\r\n  if (l === 0 || max === min) {\r\n    s = 0\r\n  } else if (l > 0 && l <= 0.5) {\r\n    s = (max - min) / (2 * l)\r\n  } else { // if l > 0.5\r\n    s = (max - min) / (2 - 2 * l)\r\n  }\r\n\r\n  return [h, s, l]\r\n}\r\n\r\nfunction clampAlpha (a) {\r\n  return utils.clamp(a, 0, 1)\r\n}\r\n\r\nclass Color {\r\n  constructor () {\r\n    this.r = this.g = this.b = 255\r\n    this.a = 1\r\n\r\n    if (arguments.length === 1) {\r\n      let arg = arguments[0]\r\n      if (typeof arg === 'string') {\r\n        this.parse(arg)\r\n        this.a = clampAlpha(this.a)\r\n      } else if (arg instanceof Color) {\r\n        this.copy(arg)\r\n      }\r\n    } else {\r\n      // if arguments.length == 3 or 4\r\n      this.r = arguments[0]\r\n      this.g = arguments[1]\r\n      this.b = arguments[2]\r\n      this.a = arguments[3] || 1\r\n    }\r\n  }\r\n\r\n  parse (str) {\r\n    let found = str.match(RE_RGB)\r\n    if (found) {\r\n      this.r = +found[1]\r\n      this.g = +found[2]\r\n      this.b = +found[3]\r\n      this.a = 1\r\n      return this\r\n    }\r\n\r\n    found = str.match(RE_HSL)\r\n    if (found) {\r\n      let h = +found[1]\r\n      let s = +found[2] / 100\r\n      let l = +found[3] / 100\r\n      let [r, g, b] = hsl2rgb(h, s, l)\r\n      this.r = r\r\n      this.g = g\r\n      this.b = b\r\n      this.a = 1\r\n      return this\r\n    }\r\n\r\n    found = str.match(RE_RGBA)\r\n    if (found) {\r\n      this.r = +found[1]\r\n      this.g = +found[2]\r\n      this.b = +found[3]\r\n      this.a = +found[4]\r\n      return this\r\n    }\r\n\r\n    found = str.match(RE_HSLA)\r\n    if (found) {\r\n      let h = +found[1]\r\n      let s = +found[2] / 100\r\n      let l = +found[3] / 100\r\n      let [r, g, b] = hsl2rgb(h, s, l)\r\n      this.r = r\r\n      this.g = g\r\n      this.b = b\r\n      this.a = parseFloat(found[4])\r\n      return this\r\n    }\r\n\r\n    found = str.match(RE_RGBA_PER)\r\n    if (found) {\r\n      this.r = +found[1] * 255 / 100\r\n      this.g = +found[2] * 255 / 100\r\n      this.b = +found[3] * 255 / 100\r\n      this.a = +found[4]\r\n      return this\r\n    }\r\n\r\n    found = str.match(RE_RGB_PER)\r\n    if (found) {\r\n      this.r = +found[1] * 255 / 100\r\n      this.g = +found[2] * 255 / 100\r\n      this.b = +found[3] * 255 / 100\r\n      this.a = 1\r\n      return this\r\n    }\r\n\r\n    found = str.match(RE_HEX3)\r\n    if (found) {\r\n      let hex = found[1]\r\n      this.r = parseInt(hex[0], 16)\r\n      this.r = this.r * 16 + this.r\r\n      this.g = parseInt(hex[1], 16)\r\n      this.g = this.g * 16 + this.g\r\n      this.b = parseInt(hex[2], 16)\r\n      this.b = this.b * 16 + this.b\r\n      this.a = 1\r\n      return this\r\n    }\r\n\r\n    found = str.match(RE_HEX6)\r\n    if (found) {\r\n      let hex = found[1]\r\n      this.r = parseInt(hex.substring(0, 2), 16)\r\n      this.g = parseInt(hex.substring(2, 4), 16)\r\n      this.b = parseInt(hex.substring(4, 6), 16)\r\n      this.a = 1\r\n      return this\r\n    }\r\n\r\n    str = str.toLowerCase().trim()\r\n    if (CSS3_COLORS[str] != null) {\r\n      this.r = CSS3_COLORS[str][0]\r\n      this.g = CSS3_COLORS[str][1]\r\n      this.b = CSS3_COLORS[str][2]\r\n      this.a = CSS3_COLORS[str][3]\r\n      if (this.a == null) this.a = 1\r\n      return this\r\n    }\r\n\r\n    console.error(`Color.parse(\"${ str }\") error.`)\r\n    return this\r\n  }\r\n\r\n  clone () {\r\n    let color = new Color()\r\n    color.copy(this)\r\n    return color\r\n  }\r\n\r\n  copy (color) {\r\n    this.r = color.r\r\n    this.g = color.g\r\n    this.b = color.b\r\n    this.a = color.a\r\n    return this\r\n  }\r\n\r\n  setRGB (r, g, b) {\r\n    this.r = parseInt(r)\r\n    this.g = parseInt(g)\r\n    this.b = parseInt(b)\r\n    this.a = 1\r\n    return this\r\n  }\r\n\r\n  setRGBA (r, g, b, a) {\r\n    this.r = parseInt(r)\r\n    this.g = parseInt(g)\r\n    this.b = parseInt(b)\r\n    this.a = clampAlpha(parseFloat(a))\r\n    return this\r\n  }\r\n\r\n  toRGB () {\r\n    return `rgb(${ this.r }, ${ this.g }, ${ this.b })`\r\n  }\r\n\r\n  toRGBA () {\r\n    return `rgba(${ this.r }, ${ this.g }, ${ this.b }, ${ this.a })`\r\n  }\r\n}\r\n\r\nexport default Color\r\n","# AnimationTask is an instance of Animation, run by AnimationRunner\r\n\r\nimport utils from '../utils.js'\r\n\r\nimport Color from '../math/Color.js'\r\nimport Vector from '../math/Vector.js'\r\n\r\nclass AnimationTask\r\n\r\n  constructor: (@animation, @target, @args = []) ->\r\n    @startTime = 0\r\n    @finished = no\r\n    @from = utils.clone @animation.from\r\n    @current = utils.clone @animation.from\r\n    @to = utils.clone @animation.to\r\n    @data = {}\r\n    @t = 0\r\n    @arg = @args[0]\r\n\r\n  init: ->\r\n    @animation.init?.call @target, @\r\n    @current = utils.clone @from\r\n\r\n# Change the animation progress to the start\r\n  restart: ->\r\n    @startTime = utils.now()\r\n    @finished = no\r\n\r\n# Change the animation progress to the end\r\n  end: ->\r\n    @startTime = utils.now() - @animation.duration * 1000\r\n\r\n# Interpolate `current` according `from`, `to` and `t`\r\n  interpolate: ->\r\n    return unless @from?\r\n\r\n    if typeof @from == 'number'\r\n      @current = interpolateNum @from, @to, @t\r\n    else if @from instanceof Color\r\n      interpolateColor @from, @to, @t, @current\r\n    else if @from instanceof Vector\r\n      interpolateVector @from, @to, @t, @current\r\n    else if utils.isPlainObject @from\r\n      for own key of @from\r\n        if typeof @from[key] == 'number'\r\n          @current[key] = interpolateNum @from[key], @to[key], @t\r\n        else\r\n          interpolateObject @from[key], @to[key], @t, @current[key]\r\n    else\r\n      console.error \"Animation not support interpolate type: \", @from\r\n\r\n  interpolateNum = (a, b, t) -> b * t - a * (t - 1)\r\n\r\n  interpolateColor = (a, b, t, c) ->\r\n    c.setRGBA interpolateNum(a.r, b.r, t), interpolateNum(a.g, b.g, t), interpolateNum(a.b, b.b, t), interpolateNum(a.a, b.a, t)\r\n\r\n  interpolateVector = (a, b, t, c) ->\r\n    c.x = interpolateNum a.x, b.x, t\r\n    c.y = interpolateNum a.y, b.y, t\r\n\r\nexport default AnimationTask\r\n","# animation class and preset animations\n\nimport Bu from '../base/Bu.js'\nimport utils from '../utils.js'\n\nimport Color from '../math/Color.js'\n\nimport AnimationTask from './AnimationTask.coffee'\n\nclass Animation\n\n  constructor: (options) ->\n    @from = options.from\n    @to = options.to\n    @duration = options.duration or 0.5\n    @easing = options.easing or false\n    @repeat = !!options.repeat\n    @init = options.init\n    @update = options.update\n    @finish = options.finish\n\n  applyTo: (target, args) ->\n    args = [args] unless utils.isArray args\n    task = new AnimationTask @, target, args\n    Bu.animationRunner.add task\n    task\n\n  isLegal: ->\n    return true unless @from? and @to?\n\n    if utils.isPlainObject @from\n      for own key of @from\n        return false unless @to[key]?\n    else\n      return false unless @to?\n    true\n\nexport default Animation\n","// Presets\n\nimport Bu from './base/Bu.js'\n\n// Global unique instances ----------------------------------------------------\n\nimport AnimationRunner from './anim/AnimationRunner.coffee'\nimport DashFlowManager from './anim/DashFlowManager.coffee'\n\n// Preset Styles --------------------------------------------------------------\n\nimport Styled from './base/Styled.js'\n\n// Preset Animations ----------------------------------------------------------\n\nimport Animation from './anim/Animation.coffee'\nimport Color from './math/Color.js'\n\nBu.$bues = []\n\nBu.animationRunner = new AnimationRunner()\nBu.dashFlowManager = new DashFlowManager()\n\nBu.styles = {\n  default: new Styled().stroke().fill(),\n  hover: new Styled().stroke('hsla(0, 100%, 40%, 0.75)').fill('hsla(0, 100%, 75%, 0.5)'),\n  text: new Styled().stroke(false).fill('black'),\n  line: new Styled().fill(false),\n  selected: new Styled().setLineWidth(2),\n  dash: new Styled().dash(),\n}\n\nBu.animations = {\n\n  // Simple\n\n  fadeIn: new Animation({\n    update: function (anim) {\n      this.opacity = anim.t\n    },\n  }),\n\n  fadeOut: new Animation({\n    update: function (anim) {\n      this.opacity = 1 - anim.t\n    },\n  }),\n\n  spin: new Animation({\n    update: function (anim) {\n      this.rotation = anim.t * Math.PI * 2\n    },\n  }),\n\n  spinIn: new Animation({\n    init: function (anim) {\n      anim.data.desScale = anim.arg || 1\n    },\n    update: function (anim) {\n      this.opacity = anim.t\n      this.rotation = anim.t * Math.PI * 4\n      this.scale = anim.t * anim.data.desScale\n    },\n  }),\n\n  spinOut: new Animation({\n    update: function (anim) {\n      this.opacity = 1 - anim.t\n      this.rotation = anim.t * Math.PI * 4\n      this.scale = 1 - anim.t\n    },\n  }),\n\n  blink: new Animation({\n    duration: 0.2,\n    from: 0,\n    to: 512,\n    update: function (anim) {\n      let d = Math.floor(Math.abs(anim.current - 256))\n      this.fillStyle = `rgb(${ d }, ${ d }, ${ d })`\n    },\n  }),\n\n  shake: new Animation({\n    init: function (anim) {\n      anim.data.ox = this.position.x\n      anim.data.range = anim.arg || 20\n    },\n    update: function (anim) {\n      this.position.x = Math.sin(anim.t * Math.PI * 8) * anim.data.range + anim.data.ox\n    },\n  }),\n\n  jump: new Animation({\n    init: function (anim) {\n      anim.data.oy = this.position.y\n      anim.data.height = anim.arg || 100\n    },\n    update: function (anim) {\n      this.position.y = -anim.data.height * Math.sin(anim.t * Math.PI) + anim.data.oy\n    },\n  }),\n\n  // Toggled: detect and save original status\n\n  puff: new Animation({\n    duration: 0.15,\n    init: function (anim) {\n      anim.from = {\n        opacity: this.opacity,\n        scale: this.scale.x,\n      }\n      anim.to = this.opacity === 1 ? {\n        opacity: 0,\n        scale: this.scale.x * 1.5,\n      } : {\n        opacity: 1,\n        scale: this.scale.x / 1.5,\n      }\n    },\n    update: function (anim) {\n      this.opacity = anim.current.opacity\n      this.scale = anim.current.scale\n    },\n  }),\n\n  clip: new Animation({\n    init: function (anim) {\n      if (this.scale.y !== 0) {\n        anim.from = this.scale.y\n        anim.to = 0\n      } else {\n        anim.from = this.scale.y\n        anim.to = this.scale.x\n      }\n    },\n    update: function (anim) {\n      this.scale.y = anim.current\n    },\n  }),\n\n  flipX: new Animation({\n    init: function (anim) {\n      anim.from = this.scale.x\n      anim.to = -anim.from\n    },\n    update: function (anim) {\n      this.scale.x = anim.current\n    },\n  }),\n\n  flipY: new Animation({\n    init: function (anim) {\n      anim.from = this.scale.y\n      anim.to = -anim.from\n    },\n    update: function (anim) {\n      this.scale.y = anim.current\n    },\n  }),\n\n  // With Arguments\n\n  moveTo: new Animation({\n    init: function (anim) {\n      if (anim.arg != null) {\n        anim.from = this.position.x\n        anim.to = parseFloat(anim.arg)\n      } else {\n        console.error('Bu:animations.moveTo need an argument')\n      }\n    },\n    update: function (anim) {\n      this.position.x = anim.current\n    },\n  }),\n\n  moveBy: new Animation({\n    init: function (anim) {\n      if (anim.args != null) {\n        anim.from = this.position.x\n        anim.to = this.position.x + parseFloat(anim.args)\n      } else {\n        console.error('Bu:animations.moveBy need an argument')\n      }\n    },\n    update: function (anim) {\n      this.position.x = anim.current\n    },\n  }),\n\n  discolor: new Animation({\n    init: function (anim) {\n      let desColor = anim.arg\n      if (typeof desColor === 'string') {\n        desColor = new Color(desColor)\n      }\n      anim.from = new Color(this.fillStyle)\n      anim.to = desColor\n    },\n    update: function (anim) {\n      this.fillStyle = anim.current.toRGBA()\n    },\n  }),\n}\n","// The size of Rectangle, Bound etc.\r\n\r\nclass Size {\r\n  constructor (width, height) {\r\n    this.type = 'Size'\r\n    this.width = width\r\n    this.height = height\r\n  }\r\n\r\n  set (width, height) {\r\n    this.width = width\r\n    this.height = height\r\n  }\r\n}\r\n\r\nexport default Size\r\n","// Audio\r\n\r\nclass Audio {\r\n  constructor (url) {\r\n    this.audio = document.createElement('audio')\r\n    this.url = ''\r\n    this.ready = false\r\n\r\n    if (url) this.load(url)\r\n  }\r\n\r\n  load (url) {\r\n    this.url = url\r\n    this.audio.addEventListener('canplay', () => {\r\n      this.ready = true\r\n    })\r\n    this.audio.src = url\r\n  }\r\n\r\n  play () {\r\n    if (this.ready) {\r\n      this.audio.play()\r\n    } else {\r\n      console.warn(`The audio file [${ this.url }] is not ready.`)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Audio\r\n","# Render text around a point\n\nimport utils from '../utils.js'\n\nimport Object2D from '../base/Object2D.js'\n\n# TODO add global settings\nDEFAULT_FONT_FAMILY = 'Verdana'\nDEFAULT_FONT_SIZE = 12\n\nclass PointText extends Object2D\n\n  ###\n  options.align:\n  ----------------------\n  |   --    0-    +-   |\n  |         |00      |\n  |   -0  --+->   +0   |\n  |                   |\n  |   -+    0+    ++   |\n  ----------------------\n  for example: text is in the right top of the point, then align = \"+-\"\n  ###\n  constructor: (@text, @x = 0, @y = 0) ->\n    super()\n    @type = 'PointText'\n    @strokeStyle = null # no stroke by default\n    @fillStyle = 'black'\n\n    options = utils.combineOptions arguments,\n      align: '00'\n    @align = options.align\n    if options.font?\n      @font = options.font\n    else if options.fontFamily? or options.fontSize?\n      @_fontFamily = options.fontFamily or DEFAULT_FONT_FAMILY\n      @_fontSize = options.fontSize or DEFAULT_FONT_SIZE\n      @font = \"#{ @_fontSize }px #{ @_fontFamily }\"\n    else\n      @font = null\n\n  @property 'align',\n    get: -> @_align\n    set: (val) ->\n      @_align = val\n      @setAlign @_align\n\n  @property 'fontFamily',\n    get: -> @_fontFamily\n    set: (val) ->\n      @_fontFamily = val\n      @font = \"#{ @_fontSize }px #{ @_fontFamily }\"\n\n  @property 'fontSize',\n    get: -> @_fontSize\n    set: (val) ->\n      @_fontSize = val\n      @font = \"#{ @_fontSize }px #{ @_fontFamily }\"\n\n  setAlign: (align) ->\n    if align.length == 1\n      align = '' + align + align\n    alignX = align.substring(0, 1)\n    alignY = align.substring(1, 2)\n    @textAlign = switch alignX\n      when '-' then 'right'\n      when '0' then 'center'\n      when '+' then 'left'\n    @textBaseline = switch alignY\n      when '-' then 'bottom'\n      when '0' then 'middle'\n      when '+' then 'top'\n    @\n\n  setFontFamily: (family) ->\n    @fontFamily = family\n    @\n\n  setFontSize: (size) ->\n    @fontSize = size\n    @\n\nexport default PointText\n","# point shape\n\nimport utils from '../utils.js'\nimport Object2D from '../base/Object2D.js'\n\nimport PointText from '../drawable/PointText.coffee'\n\nclass Point extends Object2D\n\n  type: 'Point'\n  fillable: yes\n\n  constructor: (@x = 0, @y = 0) ->\n    super()\n\n    @lineWidth = 0.5\n    @_labelIndex = -1\n\n  clone: -> new Point @x, @y\n\n  @property 'label',\n    get: -> if @_labelIndex > -1 then @children[@_labelIndex].text else ''\n    set: (val) ->\n      if @_labelIndex == -1\n        pointText = new PointText val, @x + utils.POINT_LABEL_OFFSET, @y, {align: '+0'}\n        @children.push pointText\n        @_labelIndex = @children.length - 1\n      else\n        @children[@_labelIndex].text = val\n\n  arcTo: (radius, arc) ->\n    return new Point @x + Math.cos(arc) * radius, @y + Math.sin(arc) * radius\n\n\n# copy value from other line\n  copy: (point) ->\n    @x = point.x\n    @y = point.y\n    @updateLabel()\n    @\n\n# set value from x, y\n  set: (x, y) ->\n    @x = x\n    @y = y\n    @updateLabel()\n    @\n\n# set label text\n  setLabel: (text) ->\n    @label = text\n    @updateLabel()\n    @\n\n  updateLabel: ->\n    if @_labelIndex > -1\n      @children[@_labelIndex].x = @x + utils.POINT_LABEL_OFFSET\n      @children[@_labelIndex].y = @y\n    @\n\nexport default Point\n","# line shape\n\nimport Object2D from '../base/Object2D.js'\n\nimport Point from '../shapes/Point.coffee'\n\nclass Line extends Object2D\n\n  type: 'Line'\n  fillable: no\n\n  constructor: (p1, p2, p3, p4) ->\n    super()\n\n    if arguments.length < 2\n      @points = [new Point(), new Point()]\n    else if arguments.length < 4\n      @points = [p1.clone(), p2.clone()]\n    else  # len >= 4\n      @points = [new Point(p1, p2), new Point(p3, p4)]\n\n    @length = 0\n    @midpoint = new Point()\n    @keyPoints = @points\n\n    @on \"changed\", =>\n      @length = @points[0].distanceTo(@points[1])\n      @midpoint.set((@points[0].x + @points[1].x) / 2, (@points[0].y + @points[1].y) / 2)\n\n    @trigger \"changed\"\n\n  clone: -> new Line @points[0], @points[1]\n\n# edit\n\n  set: (a1, a2, a3, a4) ->\n    if p4?\n      @points[0].set a1, a2\n      @points[1].set a3, a4\n    else\n      @points[0] = a1\n      @points[1] = a2\n    @trigger \"changed\"\n    @\n\n  setPoint1: (a1, a2) ->\n    if a2?\n      @points[0].set a1, a2\n    else\n      @points[0].copy a1\n    @trigger \"changed\"\n    @\n\n  setPoint2: (a1, a2) ->\n    if a2?\n      @points[1].set a1, a2\n    else\n      @points[1].copy a1\n    @trigger \"changed\"\n    @\n\nexport default Line\n","# Bow shape\n\nimport Object2D from '../base/Object2D.js'\n\nimport Line from '../shapes/Line.coffee'\nimport Point from '../shapes/Point.coffee'\n\nclass Bow extends Object2D\n\n  type: 'Bow'\n  fillable: yes\n\n  constructor: (@cx, @cy, @radius, @aFrom, @aTo) ->\n    super()\n\n    [@aFrom, @aTo] = [@aTo, @aFrom] if @aFrom > @aTo\n\n    @center = new Point @cx, @cy\n    @string = new Line @center.arcTo(@radius, @aFrom), @center.arcTo(@radius, @aTo)\n    @keyPoints = @string.points\n\n    @updateKeyPoints()\n    @on 'changed', @updateKeyPoints\n    @on 'changed', => @.bounds?.update()\n\n  clone: -> new Bow @cx, @cy, @radius, @aFrom, @aTo\n\n  updateKeyPoints: ->\n    @center.set @cx, @cy\n    @string.points[0].copy @center.arcTo @radius, @aFrom\n    @string.points[1].copy @center.arcTo @radius, @aTo\n    @keyPoints = @string.points\n    @\n\nexport default Bow\n","# Circle shape\n\nimport Object2D from '../base/Object2D.js'\n\nimport Point from '../shapes/Point.coffee'\n\nclass Circle extends Object2D\n\n  type: 'Circle'\n  fillable: yes\n\n  constructor: (@_radius = 1, cx = 0, cy = 0) ->\n    super()\n\n    @_center = new Point(cx, cy)\n    @bounds = null # for accelerate contain test\n\n    @keyPoints = [@_center]\n    @on 'centerChanged', @updateKeyPoints\n\n  clone: () -> new Circle @radius, @cx, @cy\n\n  updateKeyPoints: ->\n    @keyPoints[0].set @cx, @cy\n\n  # property\n\n  @property 'cx',\n    get: -> @_center.x\n    set: (val) ->\n      @_center.x = val\n      @trigger 'centerChanged', @\n\n  @property 'cy',\n    get: -> @_center.y\n    set: (val) ->\n      @_center.y = val\n      @trigger 'centerChanged', @\n\n  @property 'center',\n    get: -> @_center\n    set: (val) ->\n      @_center = val\n      @cx = val.x\n      @cy = val.y\n      @keyPoints[0] = val\n      @trigger 'centerChanged', @\n\n  @property 'radius',\n    get: -> @_radius\n    set: (val) ->\n      @_radius = val\n      @trigger 'radiusChanged', @\n      @\n\nexport default Circle\n","# Ellipse/Oval Shape\n\nimport Object2D from '../base/Object2D.js'\n\nclass Ellipse extends Object2D\n\n  type: 'Ellipse'\n  fillable: yes\n\n  constructor: (@_radiusX = 20, @_radiusY = 10) ->\n    super()\n\n  # property\n\n  @property 'radiusX',\n    get: -> @_radiusX\n    set: (val) ->\n      @_radiusX = val\n      @trigger 'changed', @\n\n\n  @property 'radiusY',\n    get: -> @_radiusY\n    set: (val) ->\n      @_radiusY = val\n      @trigger 'changed', @\n\nexport default Ellipse\n","# Fan shape\n\nimport Object2D from '../base/Object2D.js'\n\nimport Line from '../shapes/Line.coffee'\nimport Point from '../shapes/Point.coffee'\n\nclass Fan extends Object2D\n\n  type: 'Fan'\n  fillable: yes\n\n  constructor: (@cx, @cy, @radius, @aFrom, @aTo) ->\n    super()\n\n    [@aFrom, @aTo] = [@aTo, @aFrom] if @aFrom > @aTo\n\n    @center = new Point @cx, @cy\n    @string = new Line @center.arcTo(@radius, @aFrom), @center.arcTo(@radius, @aTo)\n\n    @keyPoints = [\n      @string.points[0]\n      @string.points[1]\n      @center\n    ]\n    @on 'changed', @updateKeyPoints\n    @on 'changed', => @.bounds?.update()\n\n  clone: -> new Fan @cx, @cy, @radius, @aFrom, @aTo\n\n  updateKeyPoints: ->\n    @center.set @cx, @cy\n    @string.points[0].copy @center.arcTo @radius, @aFrom\n    @string.points[1].copy @center.arcTo @radius, @aTo\n    @\n\nexport default Fan\n","# triangle shape\n\nimport Object2D from '../base/Object2D.js'\n\nimport Line from '../shapes/Line.coffee'\nimport Point from '../shapes/Point.coffee'\n\nclass Triangle extends Object2D\n\n  type: 'Triangle'\n  fillable: yes\n\n  constructor: (p1, p2, p3) ->\n    super()\n\n    if arguments.length == 6\n      [x1, y1, x2, y2, x3, y3] = arguments\n      p1 = new Point x1, y1\n      p2 = new Point x2, y2\n      p3 = new Point x3, y3\n\n    @lines = [\n      new Line(p1, p2)\n      new Line(p2, p3)\n      new Line(p3, p1)\n    ]\n    #@center = new Point average(p1.x, p2.x, p3.x), average(p1.y, p2.y, p3.y)\n    @points = [p1, p2, p3]\n    @keyPoints = @points\n    @on 'changed', @update\n    @on 'changed', => @.bounds?.update()\n\n  clone: -> new Triangle @points[0], @points[1], @points[2]\n\n  update: ->\n    @lines[0].points[0].copy @points[0]\n    @lines[0].points[1].copy @points[1]\n    @lines[1].points[0].copy @points[1]\n    @lines[1].points[1].copy @points[2]\n    @lines[2].points[0].copy @points[2]\n    @lines[2].points[1].copy @points[0]\n\nexport default Triangle\n","# polygon shape\n\nimport utils from '../utils.js'\nimport Object2D from '../base/Object2D.js'\n\nimport Line from '../shapes/Line.coffee'\nimport Point from '../shapes/Point.coffee'\nimport Triangle from '../shapes/Triangle.coffee'\n\nclass Polygon extends Object2D\n\n  type: 'Polygon'\n  fillable: yes\n\n  ###\n    constructors\n    1. Polygon(points)\n    2. Polygon(x, y, radius, n, options): to generate regular polygon\n      options: angle - start angle of regular polygon\n  ###\n  constructor: (points) ->\n    super()\n\n    @vertices = []\n    @lines = []\n    @triangles = []\n\n    options = utils.combineOptions arguments,\n      angle: 0\n\n    if utils.isArray points\n      @vertices = points if points?\n    else\n      if arguments.length < 4\n        x = 0\n        y = 0\n        radius = arguments[0]\n        n = arguments[1]\n      else\n        x = arguments[0]\n        y = arguments[1]\n        radius = arguments[2]\n        n = arguments[3]\n      @vertices = Polygon.generateRegularPoints x, y, radius, n, options\n\n    @onVerticesChanged()\n    @on 'changed', @onVerticesChanged\n    @on 'changed', => @.bounds?.update()\n    @keyPoints = @vertices\n\n  clone: -> new Polygon @vertices\n\n  onVerticesChanged: ->\n    @lines = []\n    @triangles = []\n    # init lines\n    if @vertices.length > 1\n      for i in [0 ... @vertices.length - 1]\n        @lines.push(new Line(@vertices[i], @vertices[i + 1]))\n      @lines.push(new Line(@vertices[@vertices.length - 1], @vertices[0]))\n\n    # init triangles\n    if @vertices.length > 2\n      for i in [1 ... @vertices.length - 1]\n        @triangles.push(new Triangle(@vertices[0], @vertices[i], @vertices[i + 1]))\n\n# detect\n\n  isSimple: () ->\n    len = @lines.length\n    for i in [0...len]\n      for j in [i + 1...len]\n        if @lines[i].isCrossWithLine(@lines[j])\n          return false\n    return true\n\n# edit\n\n  addPoint: (point, insertIndex) ->\n    if not insertIndex?\n# add point\n      @vertices.push point\n\n      # add line\n      if @vertices.length > 1\n        @lines[@lines.length - 1].points[1] = point\n      if @vertices.length > 0\n        @lines.push(new Line(@vertices[@vertices.length - 1], @vertices[0]))\n\n      # add triangle\n      if @vertices.length > 2\n        @triangles.push(new Triangle(\n          @vertices[0]\n          @vertices[@vertices.length - 2]\n          @vertices[@vertices.length - 1]\n        ))\n    else\n      @vertices.splice(insertIndex, 0, point)\n  # TODO add lines and triangles\n\n  @generateRegularPoints = (cx, cy, radius, n, options) ->\n    angleDelta = options.angle\n    r = radius\n    points = []\n    angleSection = utils.TWO_PI / n\n    for i in [0 ... n]\n      a = i * angleSection + angleDelta\n      x = cx + r * Math.cos(a)\n      y = cy + r * Math.sin(a)\n      points[i] = new Point x, y\n    return points\n\nexport default Polygon\n","# polyline shape\n\nimport Object2D from '../base/Object2D.js'\n\nimport Line from '../shapes/Line.coffee'\nimport Point from '../shapes/Point.coffee'\n\nclass Polyline extends Object2D\n\n  type: 'Polyline'\n  fillable: no\n\n  constructor: (@vertices = []) ->\n    super()\n\n    if arguments.length > 1\n      vertices = []\n      for i in [0 ... arguments.length / 2]\n        vertices.push new Point arguments[i * 2], arguments[i * 2 + 1]\n      @vertices = vertices\n\n    @lines = []\n    @keyPoints = @vertices\n\n    @fill off\n\n    @on \"changed\", =>\n      if @vertices.length > 1\n        @updateLines()\n        @calcLength?()\n        @calcPointNormalizedPos?()\n    @trigger \"changed\"\n\n  clone: ->\n    polyline = new Polyline @vertices\n    polyline.strokeStyle = @strokeStyle\n    polyline.fillStyle = @fillStyle\n    polyline.dashStyle = @dashStyle\n    polyline.lineWidth = @lineWidth\n    polyline.dashOffset = @dashOffset\n    polyline\n\n  updateLines: ->\n    for i in [0 ... @vertices.length - 1]\n      if @lines[i]?\n        @lines[i].set @vertices[i], @vertices[i + 1]\n      else\n        @lines[i] = new Line @vertices[i], @vertices[i + 1]\n    # TODO remove the rest\n    @\n\n  # edit\n\n  set = (points) ->\n# points\n    for i in [0 ... @vertices.length]\n      @vertices[i].copy points[i]\n\n    # remove the extra points\n    if @vertices.length > points.length\n      @vertices.splice points.length\n\n    @trigger \"changed\"\n    @\n\n  addPoint: (point, insertIndex) ->\n    if not insertIndex?\n# add point\n      @vertices.push point\n      # add line\n      if @vertices.length > 1\n        @lines.push new Line @vertices[@vertices.length - 2], @vertices[@vertices.length - 1]\n    else\n      @vertices.splice insertIndex, 0, point\n    # TODO add lines\n    @trigger \"changed\"\n    @\n\nexport default Polyline\n","# rectangle shape\r\n\r\nimport Size from '../math/Size.js'\r\nimport Object2D from '../base/Object2D.js'\r\n\r\nimport Point from '../shapes/Point.coffee'\r\n\r\nclass Rectangle extends Object2D\r\n\r\n  type: 'Rectangle'\r\n  fillable: yes\r\n\r\n  constructor: (x, y, width, height, cornerRadius = 0) ->\r\n    super()\r\n\r\n    @center = new Point x + width / 2, y + height / 2\r\n    @size = new Size width, height\r\n\r\n    @pointLT = new Point x, y\r\n    @pointRT = new Point x + width, y\r\n    @pointRB = new Point x + width, y + height\r\n    @pointLB = new Point x, y + height\r\n\r\n    @points = [@pointLT, @pointRT, @pointRB, @pointLB]\r\n\r\n    @cornerRadius = cornerRadius\r\n    @on 'changed', => @.bounds?.update()\r\n\r\n  @property 'cornerRadius',\r\n    get: -> @_cornerRadius\r\n    set: (val) ->\r\n      @_cornerRadius = val\r\n      @keyPoints = if val > 0 then [] else @points\r\n\r\n  clone: -> new Rectangle @pointLT.x, @pointLT.y, @size.width, @size.height\r\n\r\n  set: (x, y, width, height) ->\r\n    @center.set x + width / 2, y + height / 2\r\n    @size.set width, height\r\n\r\n    @pointLT.set x, y\r\n    @pointRT.set x + width, y\r\n    @pointRB.set x + width, y + height\r\n    @pointLB.set x, y + height\r\n\r\nexport default Rectangle\r\n","# spline shape\n\nimport utils from '../utils.js'\nimport Object2D from '../base/Object2D.js'\n\nimport Point from '../shapes/Point.coffee'\nimport Polyline from '../shapes/Polyline.coffee'\n\nclass Spline extends Object2D\n\n  type: 'Spline'\n  fillable: no\n\n  constructor: (vertices) ->\n    super()\n\n    if vertices instanceof Polyline\n      polyline = vertices\n      @vertices = polyline.vertices\n      polyline.on 'pointChange', (polyline) =>\n        @vertices = polyline.vertices\n        calcControlPoints @\n    else\n      @vertices = utils.clone vertices\n\n    @keyPoints = @vertices\n    @controlPointsAhead = []\n    @controlPointsBehind = []\n\n    @fill off\n    @smoothFactor = utils.DEFAULT_SPLINE_SMOOTH\n    @_smoother = no\n\n    calcControlPoints @\n\n  @property 'smoother',\n    get: -> @_smoother\n    set: (val) ->\n      oldVal = @_smoother\n      @_smoother = val\n      calcControlPoints @ if oldVal != @_smoother\n\n  clone: -> new Spline @vertices\n\n  addPoint: (point) ->\n    @vertices.push point\n    calcControlPoints @\n\n  calcControlPoints = (spline) ->\n    spline.keyPoints = spline.vertices\n\n    p = spline.vertices\n    len = p.length\n    if len >= 1\n      spline.controlPointsBehind[0] = p[0]\n    if len >= 2\n      spline.controlPointsAhead[len - 1] = p[len - 1]\n    if len >= 3\n      for i in [1...len - 1]\n        theta1 = Math.atan2 p[i].y - p[i - 1].y, p[i].x - p[i - 1].x\n        theta2 = Math.atan2 p[i + 1].y - p[i].y, p[i + 1].x - p[i].x\n        len1 = utils.bevel p[i].y - p[i - 1].y, p[i].x - p[i - 1].x\n        len2 = utils.bevel p[i].y - p[i + 1].y, p[i].x - p[i + 1].x\n        theta = theta1 + (theta2 - theta1) * if spline._smoother then len1 / (len1 + len2) else 0.5\n        theta += Math.PI if Math.abs(theta - theta1) > utils.HALF_PI\n        xA = p[i].x - len1 * spline.smoothFactor * Math.cos(theta)\n        yA = p[i].y - len1 * spline.smoothFactor * Math.sin(theta)\n        xB = p[i].x + len2 * spline.smoothFactor * Math.cos(theta)\n        yB = p[i].y + len2 * spline.smoothFactor * Math.sin(theta)\n        spline.controlPointsAhead[i] = new Point xA, yA\n        spline.controlPointsBehind[i] = new Point xB, yB\n\n# add control lines for debugging\n#spline.children[i * 2 - 2] = new Line spline.vertices[i], spline.controlPointsAhead[i]\n#spline.children[i * 2 - 1] =  new Line spline.vertices[i], spline.controlPointsBehind[i]\n\nexport default Spline\n","# Used to render bitmap to the screen\r\n\r\nimport Size from '../math/Size.js'\r\nimport Vector from '../math/Vector.js'\r\n\r\nimport Object2D from '../base/Object2D.js'\r\n\r\nclass Image extends Object2D\r\n\r\n  constructor: (@url, x = 0, y = 0, width, height) ->\r\n    super()\r\n    @type = 'Image'\r\n\r\n    @autoSize = yes\r\n    @size = new Size\r\n    @position = new Vector x, y\r\n    @center = new Vector x + width / 2, y + height / 2\r\n    if width?\r\n      @size.set width, height\r\n      @autoSize = no\r\n\r\n    @pivot = new Vector 0.5, 0.5\r\n\r\n    @_image = new window.Image\r\n    @ready = false\r\n\r\n    @_image.onload = (ev) =>\r\n      if @autoSize\r\n        @size.set @_image.width, @_image.height\r\n      @ready = true\r\n\r\n    @_image.src = @url if @url?\r\n\r\n  @property 'image',\r\n    get: -> @_image\r\n    set: (val) ->\r\n      @_image = val\r\n      @ready = yes\r\n\r\nexport default Image\r\n","# Sprite Sheet\n\nimport Event from '../base/Event.js'\n\n#----------------------------------------------------------------------\n# jQuery style ajax()\n#\toptions:\n#\t\turl: string\n#\t\t====\n#\t\tasync = true: bool\n#\tdata: object - query parameters TODO: implement this\n#\t\tmethod = GET: POST, PUT, DELETE, HEAD\n#\t\tusername: string\n#\t\tpassword: string\n#\t\tsuccess: function\n#\t\terror: function\n#\t\tcomplete: function\n#----------------------------------------------------------------------\najax = (url, ops) ->\n  if !ops\n    if typeof url == 'object'\n      ops = url\n      url = ops.url\n    else\n      ops = {}\n  ops.method or= 'GET'\n  ops.async = true unless ops.async?\n\n  xhr = new XMLHttpRequest\n  xhr.onreadystatechange = ->\n    if xhr.readyState == 4\n      if xhr.status == 200\n        ops.success xhr.responseText, xhr.status, xhr if ops.success?\n      else\n        ops.error xhr, xhr.status if ops.error?\n        ops.complete xhr, xhr.status if ops.complete?\n\n  xhr.open ops.method, url, ops.async, ops.username, ops.password\n  xhr.send null\n\nclass SpriteSheet\n\n  constructor: (@url) ->\n    Event.apply @\n\n    @ready = no # If this sprite sheet is loaded and parsed.\n    @height = 0 # Height of this sprite\n\n    @data = null # The JSON data\n    @images = [] # The `Image` list loaded\n    @frameImages = [] # Parsed frame images\n\n    # load and trigger parseData()\n    ajax @url, success: (text) =>\n      @data = JSON.parse text\n\n      if not @data.images?\n        @data.images = [@url.substring(@url.lastIndexOf('/'), @url.length - 5) + '.png']\n\n      baseUrl = @url.substring 0, @url.lastIndexOf('/') + 1\n      for own i of @data.images\n        @data.images[i] = baseUrl + @data.images[i]\n\n        countLoaded = 0\n        @images[i] = new Image\n        @images[i].onload = () =>\n          countLoaded += 1\n          @parseData() if countLoaded == @data.images.length\n        @images[i].src = @data.images[i]\n\n  parseData: ->\n# Clip the image for every frames\n    frames = @data.frames\n    for own i of frames\n      for j in [0..4]\n        if not frames[i][j]?\n          frames[i][j] = if frames[i - 1]?[j]? then frames[i - 1][j] else 0\n      x = frames[i][0]\n      y = frames[i][1]\n      w = frames[i][2]\n      h = frames[i][3]\n      frameIndex = frames[i][4]\n      @frameImages[i] = clipImage @images[frameIndex], x, y, w, h\n      @height = h if @height == 0\n\n    @ready = yes\n    @trigger 'loaded'\n\n  getFrameImage: (key, index = 0) ->\n    return null unless @ready\n    animation = @data.animations[key]\n    return null unless animation?\n\n    return @frameImages[animation.frames[index]]\n\n  measureTextWidth: (text) ->\n    width = 0\n    for char in text\n      width += @getFrameImage(char).width\n    width\n\n  #----------------------------------------------------------------------\n  # Private members\n  #----------------------------------------------------------------------\n\n  canvas = document.createElement 'canvas'\n  context = canvas.getContext '2d'\n\n  clipImage = (image, x, y, w, h) ->\n    canvas.width = w\n    canvas.height = h\n    context.drawImage image, x, y, w, h, 0, 0, w, h\n\n    newImage = new Image()\n    newImage.src = canvas.toDataURL()\n    return newImage\n\nexport default SpriteSheet\n","# Pan and zoom the camera by the mouse\r\n# Drag left mouse button to pan, wheel up/down to zoom in/out\r\n\r\nimport utils from '../utils.js'\r\n\r\nimport Vector from '../math/Vector.js'\r\n\r\nimport Animation from '../anim/Animation.coffee'\r\n\r\nclass MouseControl\r\n\r\n  scaleAnimation = new Animation\r\n    duration: 0.2\r\n    init: (anim) ->\r\n      anim.arg = 1 unless anim.arg?\r\n      anim.from = @scale.clone()\r\n      anim.to = @scale.clone().multiplyScalar parseFloat anim.arg\r\n    update: (anim) ->\r\n      @scale = anim.current\r\n\r\n  translateAnimation = new Animation\r\n    duration: 0.2\r\n    init: (anim) ->\r\n      anim.arg = new Vector unless anim.arg?\r\n      anim.from = @position.clone()\r\n      anim.to = @position.clone().add anim.arg\r\n    update: (anim) ->\r\n      @position.copy anim.current\r\n\r\n  constructor: (@renderer) ->\r\n    @camera = @renderer.camera\r\n    @zoomScaleAnim = scaleAnimation.applyTo @camera\r\n    @zoomTransAnim = translateAnimation.applyTo @camera\r\n\r\n    @smoothZooming = yes\r\n    @desScale = new Vector 1, 1\r\n\r\n    @renderer.dom.addEventListener 'mousemove', @onMouseMove\r\n    @renderer.dom.addEventListener 'mousewheel', @onMouseWheel\r\n\r\n  onMouseMove: (ev) =>\r\n    if ev.buttons == utils.MOUSE.LEFT\r\n      scale = @camera.scale.x\r\n      dx = -ev.movementX * scale\r\n      dy = -ev.movementY * scale\r\n\r\n      @camera.translate dx, dy\r\n\r\n  onMouseWheel: (ev) =>\r\n    [x, y] = @renderer.projectToWorld(ev.offsetX, ev.offsetY)\r\n    deltaScaleStep = Math.pow(1.25, -ev.wheelDelta / 120)\r\n    @desScale.multiplyScalar deltaScaleStep\r\n    deltaScaleAll = @desScale.x / @camera.scale.x\r\n\r\n    targetStyle = getComputedStyle(ev.target)\r\n    dx = -x * (deltaScaleAll - 1) * @camera.scale.x\r\n    dy = -y * (deltaScaleAll - 1) * @camera.scale.y\r\n\r\n    if @smoothZooming\r\n      @zoomScaleAnim.from.copy @camera.scale\r\n      @zoomScaleAnim.to.copy @desScale\r\n      @zoomScaleAnim.restart()\r\n\r\n      @zoomTransAnim.from.copy @camera.position\r\n      @zoomTransAnim.to.set @camera.position.x + dx, @camera.position.y + dy\r\n      @zoomTransAnim.restart()\r\n    else\r\n      @camera.translate dx, dy\r\n      @camera.scale.copy this.desScale\r\n\r\nexport default MouseControl\r\n","# Geometry Algorithm Collection\n\nimport utils from '../utils.js'\n\nimport Bow from '../shapes/Bow.coffee'\nimport Circle from '../shapes/Circle.coffee'\nimport Ellipse from '../shapes/Ellipse.coffee'\nimport Fan from '../shapes/Fan.coffee'\nimport Line from '../shapes/Line.coffee'\nimport Point from '../shapes/Point.coffee'\nimport Polygon from '../shapes/Polygon.coffee'\nimport Polyline from '../shapes/Polyline.coffee'\nimport Rectangle from '../shapes/Rectangle.coffee'\nimport Spline from '../shapes/Spline.coffee'\nimport Triangle from '../shapes/Triangle.coffee'\n\ngeometryAlgorithm = G =\n\n  inject: ->\n    @injectInto [\n      'point'\n      'line'\n      'circle'\n      'ellipse'\n      'triangle'\n      'rectangle'\n      'fan'\n      'bow'\n      'polygon'\n      'polyline'\n    ]\n\n  injectInto: (shapes) ->\n    shapes = [shapes] if typeof shapes == 'string'\n\n    if 'point' in shapes\n      Point::inCircle = (circle) ->\n        G.pointInCircle @, circle\n      Point::distanceTo = (point) ->\n        G.distanceFromPointToPoint @, point\n      Point::isNear = (target, limit = utils.DEFAULT_NEAR_DIST) ->\n        switch target.type\n          when 'Point'\n            G.pointNearPoint @, target, limit\n          when 'Line'\n            G.pointNearLine @, target, limit\n          when 'Polyline'\n            G.pointNearPolyline @, target, limit\n      Point.interpolate = G.interpolateBetweenTwoPoints\n\n    if 'line' in shapes\n      Line::distanceTo = (point) ->\n        G.distanceFromPointToLine point, @\n      Line::isTwoPointsSameSide = (p1, p2) ->\n        G.twoPointsSameSideOfLine p1, p2, @\n      Line::footPointFrom = (point, saveTo) ->\n        G.footPointFromPointToLine point, @, saveTo\n      Line::getCrossPointWith = (line) ->\n        G.getCrossPointOfTwoLines line, @\n      Line::isCrossWithLine = (line) ->\n        G.isTwoLinesCross line, @\n      Rectangle::intersectRect = (rect) ->\n        G.isLineIntersectRect @, rect\n\n    if 'circle' in shapes\n      Circle::_containsPoint = (point) ->\n        G.pointInCircle point, @\n\n    if 'ellipse' in shapes\n      Ellipse::_containsPoint = (point) ->\n        G.pointInEllipse point, @\n\n    if 'triangle' in shapes\n      Triangle::_containsPoint = (point) ->\n        G.pointInTriangle point, @\n      Triangle::area = ->\n        G.calcTriangleArea @\n\n    if 'rectangle' in shapes\n      Rectangle::containsPoint = (point) ->\n        G.pointInRectangle point, @\n      Rectangle::intersectLine = (line) ->\n        G.isLineIntersectRect line, @\n\n    if 'fan' in shapes\n      Fan::_containsPoint = (point) ->\n        G.pointInFan point, @\n\n    if 'bow' in shapes\n      Bow::_containsPoint = (point) ->\n        G.pointInBow point, @\n\n    if 'polygon' in shapes\n      Polygon::_containsPoint = (point) ->\n        G.pointInPolygon point, @\n\n    if 'polyline' in shapes\n      Polyline::length = 0\n      Polyline::pointNormalizedPos = []\n      Polyline::calcLength = () ->\n        @length = G.calcPolylineLength @\n      Polyline::calcPointNormalizedPos = ->\n        G.calcNormalizedVerticesPosOfPolyline @\n      Polyline::getNormalizedPos = (index) ->\n        if index? then @pointNormalizedPos[index] else @pointNormalizedPos\n      Polyline::compress = (strength = 0.8) ->\n        G.compressPolyline @, strength\n\n# Point in shapes\n\n  pointNearPoint: (point, target, limit = utils.DEFAULT_NEAR_DIST) ->\n    point.distanceTo(target) < limit\n\n  pointNearLine: (point, line, limit = utils.DEFAULT_NEAR_DIST) ->\n    verticalDist = line.distanceTo point\n    footPoint = line.footPointFrom point\n\n    isBetween1 = footPoint.distanceTo(line.points[0]) < line.length + limit\n    isBetween2 = footPoint.distanceTo(line.points[1]) < line.length + limit\n\n    return verticalDist < limit and isBetween1 and isBetween2\n\n  pointNearPolyline: (point, polyline, limit = utils.DEFAULT_NEAR_DIST) ->\n    for line in polyline.lines\n      return yes if G.pointNearLine point, line, limit\n    no\n\n  pointInCircle: (point, circle) ->\n    dx = point.x - circle.cx\n    dy = point.y - circle.cy\n    return utils.bevel(dx, dy) < circle.radius\n\n  pointInEllipse: (point, ellipse) ->\n    return utils.bevel(point.x / ellipse.radiusX, point.y / ellipse.radiusY) < 1\n\n  pointInRectangle: (point, rectangle) ->\n    point.x > rectangle.pointLT.x and\n      point.y > rectangle.pointLT.y and\n      point.x < rectangle.pointLT.x + rectangle.size.width and\n      point.y < rectangle.pointLT.y + rectangle.size.height\n\n  pointInTriangle: (point, triangle) ->\n    G.twoPointsSameSideOfLine(point, triangle.points[2], triangle.lines[0]) and\n      G.twoPointsSameSideOfLine(point, triangle.points[0], triangle.lines[1]) and\n      G.twoPointsSameSideOfLine(point, triangle.points[1], triangle.lines[2])\n\n  pointInFan: (point, fan) ->\n    dx = point.x - fan.cx\n    dy = point.y - fan.cy\n    a = Math.atan2(point.y - fan.cy, point.x - fan.cx)\n    a += utils.TWO_PI while a < fan.aFrom\n    return utils.bevel(dx, dy) < fan.radius && a > fan.aFrom && a < fan.aTo\n\n  pointInBow: (point, bow) ->\n    if utils.bevel(bow.cx - point.x, bow.cy - point.y) < bow.radius\n      sameSide = bow.string.isTwoPointsSameSide(bow.center, point)\n      smallThanHalfCircle = bow.aTo - bow.aFrom < Math.PI\n      return sameSide ^ smallThanHalfCircle\n    else\n      return false\n\n  pointInPolygon: (point, polygon) ->\n    for triangle in polygon.triangles\n      if triangle.containsPoint point\n        return true\n    false\n\n# Distance\n\n  distanceFromPointToPoint: (point1, point2) ->\n    utils.bevel point1.x - point2.x, point1.y - point2.y\n\n  distanceFromPointToLine: (point, line) ->\n    p1 = line.points[0]\n    p2 = line.points[1]\n    a = (p1.y - p2.y) / (p1.x - p2.x)\n    b = p1.y - a * p1.x\n    return Math.abs(a * point.x + b - point.y) / Math.sqrt(a * a + 1)\n\n# Point Related\n\n  interpolateBetweenTwoPoints: (p1, p2, k, p3) ->\n    x = p1.x + (p2.x - p1.x) * k\n    y = p1.y + (p2.y - p1.y) * k\n\n    if p3?\n      p3.set x, y\n    else\n      return new Point x, y\n\n# Point with Line\n\n  twoPointsSameSideOfLine: (p1, p2, line) ->\n    pA = line.points[0]\n    pB = line.points[1]\n    if pA.x == pB.x\n# if both of the two points are on the line then we consider they are in the same side\n      return (p1.x - pA.x) * (p2.x - pA.x) > 0\n    else\n      y01 = (pA.y - pB.y) * (p1.x - pA.x) / (pA.x - pB.x) + pA.y\n      y02 = (pA.y - pB.y) * (p2.x - pA.x) / (pA.x - pB.x) + pA.y\n      return (p1.y - y01) * (p2.y - y02) > 0\n\n  footPointFromPointToLine: (point, line, saveTo = new Point) ->\n    p1 = line.points[0]\n    p2 = line.points[1]\n    A = (p1.y - p2.y) / (p1.x - p2.x)\n    B = p1.y - A * p1.x\n    m = point.x + A * point.y\n    x = (m - A * B) / (A * A + 1)\n    y = A * x + B\n\n    saveTo.set x, y\n    return saveTo\n\n  getCrossPointOfTwoLines: (line1, line2) ->\n    [p1, p2] = line1.points\n    [q1, q2] = line2.points\n\n    a1 = p2.y - p1.y\n    b1 = p1.x - p2.x\n    c1 = (a1 * p1.x) + (b1 * p1.y)\n    a2 = q2.y - q1.y\n    b2 = q1.x - q2.x\n    c2 = (a2 * q1.x) + (b2 * q1.y)\n    det = (a1 * b2) - (a2 * b1)\n\n    return new Point ((b2 * c1) - (b1 * c2)) / det, ((a1 * c2) - (a2 * c1)) / det\n\n  isTwoLinesCross: (line1, line2) ->\n    x1 = line1.points[0].x\n    y1 = line1.points[0].y\n    x2 = line1.points[1].x\n    y2 = line1.points[1].y\n    x3 = line2.points[0].x\n    y3 = line2.points[0].y\n    x4 = line2.points[1].x\n    y4 = line2.points[1].y\n\n\n    d = (y2 - y1) * (x4 - x3) - (y4 - y3) * (x2 - x1)\n\n    if d == 0\n      return false\n    else\n      x0 = ((x2 - x1) * (x4 - x3) * (y3 - y1) + (y2 - y1) * (x4 - x3) * x1 - (y4 - y3) * (x2 - x1) * x3) / d\n      y0 = ((y2 - y1) * (y4 - y3) * (x3 - x1) + (x2 - x1) * (y4 - y3) * y1 - (x4 - x3) * (y2 - y1) * y3) / -d\n    return (x0 - x1) * (x0 - x2) <= 0 and\n        (x0 - x3) * (x0 - x4) <= 0 and\n        (y0 - y1) * (y0 - y2) <= 0 and\n        (y0 - y3) * (y0 - y4) <= 0\n\n# Line with rectangle\n\n  isLineIntersectRect: (line, rect) ->\n    lines = [new Line, new Line, new Line, new Line]\n    lines[0].set rect.points[0], rect.points[1]\n    lines[1].set rect.points[1], rect.points[2]\n    lines[2].set rect.points[2], rect.points[3]\n    lines[3].set rect.points[3], rect.points[0]\n    # console.log line.points[0].x, line.points[0].y, rect.points[0].x, rect.points[0].y\n    G.isTwoLinesCross(line, lines[0]) or\n      G.isTwoLinesCross(line, lines[1]) or\n      G.isTwoLinesCross(line, lines[2]) or\n      G.isTwoLinesCross(line, lines[3])\n\n# Polyline\n\n  calcPolylineLength: (polyline) ->\n    len = 0\n    if polyline.vertices.length >= 2\n      for i in [1 ... polyline.vertices.length]\n        len += polyline.vertices[i].distanceTo polyline.vertices[i - 1]\n    return len\n\n  calcNormalizedVerticesPosOfPolyline: (polyline) ->\n    currPos = 0\n    polyline.pointNormalizedPos[0] = 0\n    for i in [1 ... polyline.vertices.length]\n      currPos += polyline.vertices[i].distanceTo(polyline.vertices[i - 1]) / polyline.length\n      polyline.pointNormalizedPos[i] = currPos\n\n  compressPolyline: (polyline, strength) ->\n    compressed = []\n    for own i of polyline.vertices\n      if i < 2\n        compressed[i] = polyline.vertices[i]\n      else\n        [pA, pM] = compressed[-2..-1]\n        pB = polyline.vertices[i]\n        obliqueAngle = Math.abs(Math.atan2(pA.y - pM.y, pA.x - pM.x) - Math.atan2(pM.y - pB.y, pM.x - pB.x))\n        if obliqueAngle < strength * strength * utils.HALF_PI\n          compressed[compressed.length - 1] = pB\n        else\n          compressed.push pB\n    polyline.vertices = compressed\n    polyline.keyPoints = polyline.vertices\n    return polyline\n\n# Area Calculation\n\n  calcTriangleArea: (triangle) ->\n    [a, b, c] = triangle.points\n    return Math.abs(((b.x - a.x) * (c.y - a.y)) - ((c.x - a.x) * (b.y - a.y))) / 2\n\nG.inject()\n\nexport default geometryAlgorithm\n","# Used to generate random shapes\r\n\r\nimport utils from '../utils.js'\r\n\r\nimport Bow from '../shapes/Bow.coffee'\r\nimport Circle from '../shapes/Circle.coffee'\r\nimport Ellipse from '../shapes/Ellipse.coffee'\r\nimport Fan from '../shapes/Fan.coffee'\r\nimport Line from '../shapes/Line.coffee'\r\nimport Point from '../shapes/Point.coffee'\r\nimport Polyline from '../shapes/Polyline.coffee'\r\nimport Polygon from '../shapes/Polygon.coffee'\r\nimport Rectangle from '../shapes/Rectangle.coffee'\r\nimport Triangle from '../shapes/Triangle.coffee'\r\n\r\nclass ShapeRandomizer\r\n\r\n  MARGIN = 30\r\n\r\n  rangeX: 0\r\n  rangeY: 0\r\n  rangeWidth: 800\r\n  rangeHeight: 450\r\n\r\n  constructor: ->\r\n\r\n  randomX: ->\r\n    utils.rand @rangeX + MARGIN, @rangeX + @rangeWidth - MARGIN * 2\r\n\r\n  randomY: ->\r\n    utils.rand @rangeY + MARGIN, @rangeY + @rangeHeight - MARGIN * 2\r\n\r\n  randomRadius: ->\r\n    utils.rand 10, Math.min(@rangeX + @rangeWidth, @rangeY + @rangeHeight) / 2\r\n\r\n  setRange: (a, b, c, d) ->\r\n    if c?\r\n      @rangeX = a\r\n      @rangeY = b\r\n      @rangeWidth = c\r\n      @rangeHeight = d\r\n    else\r\n      @rangeWidth = a\r\n      @rangeHeight = b\r\n    @\r\n\r\n  generate: (type) ->\r\n    switch type\r\n      when 'circle' then @generateCircle()\r\n      when 'bow' then @generateBow()\r\n      when 'triangle' then @generateTriangle()\r\n      when 'rectangle' then @generateRectangle()\r\n      when 'fan' then @generateFan()\r\n      when 'polygon' then @generatePolygon()\r\n      when 'line' then @generateLine()\r\n      when 'polyline' then @generatePolyline()\r\n      else\r\n        console.warn 'not support shape: ' + type\r\n\r\n  randomize: (shape) ->\r\n    if utils.isArray shape\r\n      @randomize s for s in shape\r\n    else\r\n      switch shape.type\r\n        when 'Circle' then @randomizeCircle shape\r\n        when 'Ellipse' then @randomizeEllipse shape\r\n        when 'Bow' then @randomizeBow shape\r\n        when 'Triangle' then @randomizeTriangle shape\r\n        when 'Rectangle' then @randomizeRectangle shape\r\n        when 'Fan' then @randomizeFan shape\r\n        when 'Polygon' then @randomizePolygon shape\r\n        when 'Line' then @randomizeLine shape\r\n        when 'Polyline' then @randomizePolyline shape\r\n        else\r\n          console.warn 'not support shape: ' + shape.type\r\n    @\r\n\r\n  randomizePosition: (shape) ->\r\n    shape.position.x = @randomX()\r\n    shape.position.y = @randomY()\r\n    shape.trigger 'changed'\r\n    @\r\n\r\n  generateCircle: ->\r\n    circle = new Circle @randomRadius(), @randomX(), @randomY()\r\n    circle.center.label = 'O'\r\n    circle\r\n\r\n  randomizeCircle: (circle) ->\r\n    circle.cx = @randomX()\r\n    circle.cy = @randomY()\r\n    circle.radius = @randomRadius()\r\n    @\r\n\r\n  generateEllipse: ->\r\n    ellipse = new Ellipse @randomRadius(), @randomRadius()\r\n    @randomizePosition ellipse\r\n    ellipse\r\n\r\n  randomizeEllipse: (ellipse) ->\r\n    ellipse.radiusX = @randomRadius()\r\n    ellipse.radiusY = @randomRadius()\r\n    @randomizePosition ellipse\r\n    @\r\n\r\n  generateBow: ->\r\n    aFrom = utils.rand utils.TWO_PI\r\n    aTo = aFrom + utils.rand utils.HALF_PI, utils.TWO_PI\r\n\r\n    bow = new Bow @randomX(), @randomY(), @randomRadius(), aFrom, aTo\r\n    bow.string.points[0].label = 'A'\r\n    bow.string.points[1].label = 'B'\r\n    bow\r\n\r\n  randomizeBow: (bow) ->\r\n    aFrom = utils.rand utils.TWO_PI\r\n    aTo = aFrom + utils.rand utils.HALF_PI, utils.TWO_PI\r\n\r\n    bow.cx = @randomX()\r\n    bow.cy = @randomY()\r\n    bow.radius = @randomRadius()\r\n    bow.aFrom = aFrom\r\n    bow.aTo = aTo\r\n    bow.trigger 'changed'\r\n    @\r\n\r\n  generateFan: ->\r\n    aFrom = utils.rand utils.TWO_PI\r\n    aTo = aFrom + utils.rand utils.HALF_PI, utils.TWO_PI\r\n\r\n    fan = new Fan @randomX(), @randomY(), @randomRadius(), aFrom, aTo\r\n    fan.center.label = 'O'\r\n    fan.string.points[0].label = 'A'\r\n    fan.string.points[1].label = 'B'\r\n    fan\r\n\r\n  randomizeFan: @:: randomizeBow\r\n\r\n  generateTriangle: ->\r\n    points = []\r\n    for i in [0..2]\r\n      points[i] = new Point @randomX(), @randomY()\r\n\r\n    triangle = new Triangle points[0], points[1], points[2]\r\n    triangle.points[0].label = 'A'\r\n    triangle.points[1].label = 'B'\r\n    triangle.points[2].label = 'C'\r\n    triangle\r\n\r\n  randomizeTriangle: (triangle) ->\r\n    triangle.points[i].set @randomX(), @randomY() for i in [0..2]\r\n    triangle.trigger 'changed'\r\n    @\r\n\r\n  generateRectangle: ->\r\n    rect = new Rectangle(\r\n      utils.rand(@rangeX + @rangeWidth)\r\n      utils.rand(@rangeY + @rangeHeight)\r\n      utils.rand(@rangeWidth / 2)\r\n      utils.rand(@rangeHeight / 2)\r\n    )\r\n    rect.pointLT.label = 'A'\r\n    rect.pointRT.label = 'B'\r\n    rect.pointRB.label = 'C'\r\n    rect.pointLB.label = 'D'\r\n    rect\r\n\r\n  randomizeRectangle: (rectangle) ->\r\n    rectangle.set @randomX(), @randomY(), @randomRadius(), @randomRadius()\r\n    rectangle.trigger 'changed'\r\n    @\r\n\r\n  generatePolygon: ->\r\n    points = []\r\n\r\n    for i in [0..3]\r\n      point = new Point @randomX(), @randomY()\r\n      point.label = 'P' + i\r\n      points.push point\r\n\r\n    new Polygon points\r\n\r\n  randomizePolygon: (polygon) ->\r\n    vertex.set @randomX(), @randomY() for vertex in polygon.vertices\r\n    polygon.trigger 'changed'\r\n    @\r\n\r\n  generateLine: ->\r\n    line = new Line @randomX(), @randomY(), @randomX(), @randomY()\r\n    line.points[0].label = 'A'\r\n    line.points[1].label = 'B'\r\n    line\r\n\r\n  randomizeLine: (line) ->\r\n    point.set @randomX(), @randomY() for point in line.points\r\n    line.trigger 'changed'\r\n    @\r\n\r\n  generatePolyline: ->\r\n    polyline = new Polyline\r\n    for i in [0..3]\r\n      point = new Point @randomX(), @randomY()\r\n      point.label = 'P' + i\r\n      polyline.addPoint point\r\n    polyline\r\n\r\n  randomizePolyline: (polyline) ->\r\n    vertex.set @randomX(), @randomY() for vertex in polyline.vertices\r\n    polyline.trigger 'changed'\r\n    @\r\n\r\nexport default ShapeRandomizer\r\n","// global config\n\nimport Bu from './base/Bu.js'\n\nlet config = {\n  originAtCenter: true,\n  font: '12px Verdana',\n  background: '#eee',\n  showKeyPoints: false,\n}\n\nlet cursor = 'default'\nObject.defineProperty(config, 'cursor', {\n  get () {\n    return cursor\n  },\n  set (val) {\n    cursor = val\n    for (let bu of Bu.$bues) {\n      bu.$renderer.dom.style.cursor = cursor\n    }\n  },\n})\n\nexport default config\n","// Entry of bu.js\r\n\r\n// main\r\nimport Bu from './base/Bu.js'\r\nimport './presets.js'\r\n\r\n// math\r\nimport Bounds from './math/Bounds.js'\r\nimport Color from './math/Color.js'\r\nimport Size from './math/Size.js'\r\nimport Vector from './math/Vector.js'\r\n\r\n// base\r\nimport Event from './base/Event.js'\r\nimport Object2D from './base/Object2D.js'\r\nimport Styled from './base/Styled.js'\r\n\r\n// core\r\nimport Audio from './core/Audio.js'\r\nimport Camera from './core/Camera.js'\r\nimport Renderer from './core/Renderer.coffee'\r\nimport Scene from './core/Scene.js'\r\n\r\n// shapes\r\nimport Bow from './shapes/Bow.coffee'\r\nimport Circle from './shapes/Circle.coffee'\r\nimport Ellipse from './shapes/Ellipse.coffee'\r\nimport Fan from './shapes/Fan.coffee'\r\nimport Line from './shapes/Line.coffee'\r\nimport Point from './shapes/Point.coffee'\r\nimport Polygon from './shapes/Polygon.coffee'\r\nimport Polyline from './shapes/Polyline.coffee'\r\nimport Rectangle from './shapes/Rectangle.coffee'\r\nimport Spline from './shapes/Spline.coffee'\r\nimport Triangle from './shapes/Triangle.coffee'\r\n\r\n// drawable\r\nimport Image from './drawable/Image.coffee'\r\nimport PointText from './drawable/PointText.coffee'\r\n\r\n// animation\r\nimport Animation from './anim/Animation.coffee'\r\nimport AnimationRunner from './anim/AnimationRunner.coffee'\r\nimport AnimationTask from './anim/AnimationTask.coffee'\r\nimport DashFlowManager from './anim/DashFlowManager.coffee'\r\nimport SpriteSheet from './anim/SpriteSheet.coffee'\r\n\r\n// input\r\nimport InputManager from './input/InputManager.coffee'\r\nimport MouseControl from './input/MouseControl.coffee'\r\n\r\n// extra\r\nimport geometryAlgorithm from './extra/geometryAlgorithm.coffee'\r\nimport ShapeRandomizer from './extra/ShapeRandomizer.coffee'\r\n\r\n// properties -----------------------------------------------------------------\r\n\r\nimport utils from './utils.js'\r\nimport config from './config.js'\r\n\r\nconst VERSION = '0.5.0-wip'\r\n\r\nBu.Bounds = Bounds\r\nBu.Color = Color\r\nBu.Size = Size\r\nBu.Vector = Vector\r\n\r\nBu.Event = Event\r\nBu.Object2D = Object2D\r\nBu.Styled = Styled\r\n\r\nBu.Audio = Audio\r\nBu.Camera = Camera\r\nBu.Renderer = Renderer\r\nBu.Scene = Scene\r\n\r\nBu.Bow = Bow\r\nBu.Circle = Circle\r\nBu.Ellipse = Ellipse\r\nBu.Fan = Fan\r\nBu.Line = Line\r\nBu.Point = Point\r\nBu.Polygon = Polygon\r\nBu.Polyline = Polyline\r\nBu.Rectangle = Rectangle\r\nBu.Spline = Spline\r\nBu.Triangle = Triangle\r\n\r\nBu.Image = Image\r\nBu.PointText = PointText\r\n\r\nBu.Animation = Animation\r\nBu.AnimationRunner = AnimationRunner\r\nBu.AnimationTask = AnimationTask\r\nBu.DashFlowManager = DashFlowManager\r\nBu.SpriteSheet = SpriteSheet\r\n\r\nBu.InputManager = InputManager\r\nBu.MouseControl = MouseControl\r\n\r\nBu.geometryAlgorithm = geometryAlgorithm\r\nBu.ShapeRandomizer = ShapeRandomizer\r\n\r\nBu.config = config // Global config\r\nBu.version = VERSION // Version info\r\n\r\n// utils in examples\r\nfor (let name of [\r\n  'd2r',\r\n  'rand',\r\n  'MOUSE',\r\n  'POINT_RENDER_SIZE',\r\n]) {\r\n  Bu[name] = utils[name]\r\n}\r\n\r\n// Output version info to the console, at most one time in a minute.\r\nlet currentTime = Date.now()\r\nlet lastTime = utils.data('version.timestamp')\r\nif (!lastTime || currentTime - lastTime > 60 * 1000) {\r\n  if (typeof console.info === 'function') {\r\n    console.info('bu.js v' + Bu.version + ' - [https://github.com/jarvisniu/bu.js]')\r\n  }\r\n  utils.data('version.timestamp', currentTime)\r\n}\r\n\r\nexport default Bu\r\n"],"names":["HALF_PI","Math","PI","TWO_PI","POINT_RENDER_SIZE","POINT_LABEL_OFFSET","DEFAULT_SPLINE_SMOOTH","DEFAULT_NEAR_DIST","MOUSE","Function","prototype","property","prop","desc","Object","defineProperty","average","ns","arguments","babelHelpers.typeof","sum","n","length","bevel","x","y","sqrt","clamp","min","max","rand","from","to","random","r2d","r","toFixed","d2r","now","window","performance","combineOptions","args","defaultOptions","givenOptions","isPlainObject","i","o","constructor","name","isArray","Array","clone","target","newObj","create","hasOwnProperty","throttle","fn","limit","currTime","lastTime","Date","apply","debounce","delay","timeout","later","setTimeout","data","key","value","localStorage","JSON","stringify","parse","Event","types","on","type","listener","listeners","indexOf","push","once","off","index","splice","trigger","ev","call","Vector","v","dx","dy","scalar","obj","scale","len","utils","a","atan2","rotation","cos","sin","position","rotaion","Bounds","x1","y1","x2","y2","isEmpty","point1","point2","update","bindEvent","p","clear","points","expandByPoint","expandByCircle","vertices","radiusX","radiusY","warn","c","center","radius","Styled","strokeStyle","DEFAULT_STROKE_STYLE","fillStyle","DEFAULT_FILL_STYLE","dashStyle","dashFlowSpeed","lineWidth","dashOffset","style","Bu","styles","default","k","stroke","fill","dash","DEFAULT_DASH_STYLE","dashFlow","speed","dashFlowManager","setSpeed","setLineWidth","w","Object2D","visible","opacity","_scale","skew","bounds","keyPoints","children","parent","da","ds","s","node","shape","anim","animations","applyTo","animate","renderer","getScene","set","projectToWorld","project","camera","unProject","containsPoint","_containsPoint","fillable","val","Camera","Scene","background","config","Renderer","delayed","domBody","domHtml","j","len1","onResize","options","ref","tick","drawShapes","drawShape","scene","tickCount","isRunning","pixelRatio","devicePixelRatio","clipMeter","ClipMeter","fillParent","width","pixelWidth","pixelHeight","height","dom","document","createElement","cursor","boxSizing","oncontextmenu","context","getContext","textBaseline","container","querySelector","body","margin","overflow","canvasRatio","containerRatio","clientHeight","clientWidth","render","addEventListener","start","requestAnimationFrame","appendChild","imageSmoothing","animationRunner","hookUp","originAtCenter","save","clearCanvas","translate","rotate","restore","fillRect","shapes","base","sx","sy","abs","globalAlpha","lineCap","lineJoin","beginPath","drawPoint","drawLine","drawCircle","drawEllipse","drawTriangle","drawRectangle","drawFan","drawBow","drawPolygon","drawPolyline","drawSpline","drawPointText","drawImage","log","lineDashOffset","setLineDash","showKeyPoints","showBounds","drawBounds","arc","moveTo","lineTo","cx","cy","ellipse","closePath","cornerRadius","drawRoundRectangle","rect","pointLT","size","pointRB","arcTo","aFrom","aTo","point","bezierCurveTo","controlPointsBehind","controlPointsAhead","char","charBitmap","font","textWidth","xOffset","yOffset","textAlign","strokeText","text","fillText","SpriteSheet","ready","measureTextWidth","getFrameImage","h","pivot","image","BOUNDS_STROKE_STYLE","BOUNDS_DASH_STYLE","_imageSmoothing","imageSmoothingEnabled","InputManager","keyStates","keyCode","keyToKeyCode","keyAliasToKeyMap","keyToKeyCodeMap","app","events","keydownListeners","keyupListeners","results","$renderer","bind","substring","cb","readyState","$options","el","$inputManager","init","$bues","methods","objects","assembleObjects","addChild","handleAppEvents","AnimationRunner","runningAnimations","task","animation","isLegal","startTime","console","error","finish","ref1","t","finished","duration","repeat","easing","easingFunctions","DEFAULT_EASING_FUNCTION","interpolate","DashFlowManager","flowingObjects","RE_HSL","RE_HSLA","RE_RGB","RE_RGBA","RE_RGB_PER","RE_RGBA_PER","RE_HEX3","RE_HEX6","CSS3_COLORS","hsl2rgb","l","nh","q","rgb","round","clampAlpha","Color","g","b","arg","copy","str","found","match","parseFloat","hex","parseInt","toLowerCase","trim","color","AnimationTask","hasProp","current","interpolateNum","interpolateColor","interpolateVector","interpolateObject","setRGBA","Animation","add","desScale","d","floor","ox","range","oy","desColor","toRGBA","Size","Audio","url","audio","load","src","play","DEFAULT_FONT_FAMILY","DEFAULT_FONT_SIZE","PointText","align","_fontFamily","fontFamily","_fontSize","fontSize","alignX","alignY","family","_align","setAlign","Point","_labelIndex","updateLabel","label","pointText","Line","p1","p2","p3","p4","midpoint","distanceTo","a1","a2","a3","a4","Bow","string","updateKeyPoints","Circle","_radius","_center","Ellipse","_radiusX","_radiusY","Fan","Triangle","x3","y3","lines","Polygon","triangles","generateRegularPoints","onVerticesChanged","ref2","isCrossWithLine","insertIndex","angleDelta","angleSection","angle","Polyline","updateLines","calcLength","calcPointNormalizedPos","polyline","Rectangle","pointRT","pointLB","_cornerRadius","Spline","calcControlPoints","smoothFactor","_smoother","oldVal","spline","len2","theta","theta1","theta2","xA","xB","yA","yB","Image","autoSize","_image","onload","ajax","ops","xhr","method","async","XMLHttpRequest","onreadystatechange","status","success","responseText","complete","open","username","password","send","images","frameImages","baseUrl","countLoaded","lastIndexOf","parseData","frameIndex","frames","clipImage","canvas","newImage","toDataURL","MouseControl","onMouseMove","onMouseWheel","zoomScaleAnim","scaleAnimation","zoomTransAnim","translateAnimation","smoothZooming","buttons","LEFT","movementX","movementY","deltaScaleAll","deltaScaleStep","targetStyle","offsetX","offsetY","pow","wheelDelta","multiplyScalar","getComputedStyle","restart","G","geometryAlgorithm","injectInto","inCircle","circle","pointInCircle","distanceFromPointToPoint","isNear","pointNearPoint","pointNearLine","pointNearPolyline","interpolateBetweenTwoPoints","distanceFromPointToLine","isTwoPointsSameSide","twoPointsSameSideOfLine","footPointFrom","saveTo","footPointFromPointToLine","getCrossPointWith","line","getCrossPointOfTwoLines","isTwoLinesCross","intersectRect","isLineIntersectRect","pointInEllipse","pointInTriangle","area","calcTriangleArea","pointInRectangle","intersectLine","pointInFan","pointInBow","pointInPolygon","pointNormalizedPos","calcPolylineLength","calcNormalizedVerticesPosOfPolyline","getNormalizedPos","compress","strength","compressPolyline","footPoint","isBetween1","isBetween2","verticalDist","rectangle","triangle","fan","bow","sameSide","smallThanHalfCircle","polygon","pA","pB","y01","y02","A","B","m","line1","line2","b1","b2","c1","c2","det","q1","q2","x0","x4","y0","y4","currPos","compressed","obliqueAngle","pM","inject","ShapeRandomizer","rangeX","MARGIN","rangeWidth","rangeY","rangeHeight","generateCircle","generateBow","generateTriangle","generateRectangle","generateFan","generatePolygon","generateLine","generatePolyline","randomize","randomizeCircle","randomizeEllipse","randomizeBow","randomizeTriangle","randomizeRectangle","randomizeFan","randomizePolygon","randomizeLine","randomizePolyline","randomX","randomY","randomRadius","randomizePosition","vertex","addPoint","bu","VERSION","version","currentTime","info"],"mappings":"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"}