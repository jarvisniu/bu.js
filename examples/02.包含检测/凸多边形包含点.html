<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Polygon Contains Point</title>
	<script src="../../lib/Za.EventListenerPattern.js"></script>
	<script src="../../src/Geom2D.dev.js"></script>
	<script type="text/javascript">

		var renderer;
		var polygon;
		var mousePos = new Geom2D.Point();

		function init() {
			renderer = new Geom2D.Renderer();
            polygon = createPolygon();
			renderer.append(polygon);

			document.body.appendChild(renderer.dom);
			renderer.dom.addEventListener("mouseup", onMouseUp);
			renderer.dom.addEventListener("mousemove", onMouseMove);
		}
		document.addEventListener("DOMContentLoaded", init);

		function createPolygon() {
            var count = 4;
            var points = [];
            for (var i = 0; i < count; i++) {
                var x = Math.random() * renderer.width;
                var y = Math.random() * renderer.height;
                var _point = new Geom2D.Point(x, y);
                _point.label = "P" + i;
                points.push(_point);
            }

			return new Geom2D.Polygon(points);
		}

		function onMouseMove(e) {
			mousePos.x = e.offsetX;
			mousePos.y = e.offsetY;

			if( polygon.containsPoint(mousePos))
                polygon.fillStyle = "yellow";
			else
                polygon.fill();
		}

		function onMouseUp(e) {
            polygon = renderer.shapes[0] = createPolygon();
		}
	</script>
</head>
<body>
<div>Move cursor to test. Click to change another polygon.<br> If the polygon is not simple, the test may not be valid.</div>
</body>
</html>
