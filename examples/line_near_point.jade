doctype html
html
	head
		meta(charset="utf-8")
		title Point on Line Test
		script(src="../build/bu.js")
		style.

			html, body {
				margin: 0;
				width: 100%;
				height: 100%;
				overflow: hidden;
			}

			#info {
				position: absolute;
				width: 100%;
				text-align: center;
				padding: 8px 0;
			}

		script(type="text/javascript").

			var bu = new Bu.App({
				canvas: {
					showKeyPoints: true,
					cursor: 'crosshair',
				},
				data: {
					generator: null,
					mousePos: new Bu.Point(),
				},
				init: function () {
					this.generator = new Bu.RandomShapeGenerator(this.$canvas);
					this.generateLines();
				},
				methods: {
					generateLines: function () {
						this.$objects.line = this.$canvas.shapes[0] = this.generator.generateLine();
						this.$objects.polyline = this.$canvas.shapes[1] = this.generator.generatePolyline();
					},
				},
				events: {
					'mouseup': function (e) {
						this.generateLines();
					},
					'mousemove': function (e) {
						var o = this.$objects;

						this.mousePos.x = e.offsetX;
						this.mousePos.y = e.offsetY;

						if (this.mousePos.isNear(o.line))
							o.line.stroke(Bu.DEFAULT_STROKE_STYLE_HOVER);
						else
							o.line.stroke();

						if (this.mousePos.isNear(o.polyline))
							o.polyline.stroke(Bu.DEFAULT_STROKE_STYLE_HOVER);
						else
							o.polyline.stroke();
					},
				},
			});

	body
		div#info Move cursor over the line to test. Click to change another group of lines.
